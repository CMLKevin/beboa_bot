3:I[4707,[],""]
5:I[6423,[],""]
6:I[2060,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"ThemeProvider"]
7:I[4351,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Header"]
8:I[9399,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Sidebar"]
4:["slug","ai/relationships","c"]
0:["FeUt14WxB_Uw-6zJdn3nr",[[["",{"children":[["slug","ai/relationships","c"],{"children":["__PAGE__?{\"slug\":[\"ai\",\"relationships\"]}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","ai/relationships","c"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3cf59f0fd0496c15.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_f367f3 __variable_a06722 font-sans","children":["$","$L6",null,{"children":["$","div",null,{"className":"min-h-screen bg-[var(--bg-primary)] transition-colors duration-200","children":[["$","$L7",null,{}],["$","div",null,{"className":"flex","children":[["$","$L8",null,{}],["$","main",null,{"className":"flex-1 min-w-0 lg:pl-[var(--sidebar-width)]","children":["$","div",null,{"className":"max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]}]]}]]}]}]}]}]],null],null],["$L9",null]]]]
a:I[6430,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"Breadcrumbs"]
b:I[9078,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CopyPageButton"]
d:I[3308,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"PageNavigation"]
e:I[5321,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"TableOfContents"]
2:[["$","article",null,{"className":"animate-in","children":[["$","div",null,{"className":"flex items-start justify-between gap-4 mb-6","children":[["$","$La",null,{}],["$","$Lb",null,{}]]}],["$","h1",null,{"children":"Relationships"}],["$","p",null,{"className":"text-lg text-[var(--text-secondary)] mb-8 -mt-2","children":"Per-user relationship tracking with LLM-powered evaluation."}],["$","div",null,{"className":"prose-custom","children":"$Lc"}],["$","$Ld",null,{}]]}],["$","$Le",null,{}]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Relationships - Beboa Docs"}],["$","meta","3",{"name":"description","content":"Per-user relationship tracking with LLM-powered evaluation."}],["$","link","4",{"rel":"icon","href":"/favicon.ico"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
f:I[5045,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CodeBlock"]
c:[["$","h1",null,{"id":"relationship-tracking","children":"Relationship Tracking"}],"\n",["$","p",null,{"children":["Beboa tracks individual relationships with each user, affecting how she interacts with them. The system uses ",["$","strong",null,{"children":"LLM-powered evaluation"}]," to assess interaction quality and determine relationship growth."]}],"\n",["$","h2",null,{"id":"relationship-stages","children":["$","a",null,{"href":"#relationship-stages","className":"anchor-link","children":"Relationship Stages"}]}],"\n",["$","p",null,{"children":"Users progress through 6 stages based on familiarity:"}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Stage"}],["$","th",null,{"children":"Min Familiarity"}],["$","th",null,{"children":"Behavior"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"stranger"}]}],["$","td",null,{"children":"0%"}],["$","td",null,{"children":"Sizing them up, default snark"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"acquaintance"}]}],["$","td",null,{"children":"20%"}],["$","td",null,{"children":"Recognizes them, slightly warmer"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"regular"}]}],["$","td",null,{"children":"40%"}],["$","td",null,{"children":"Comfortable teasing, remembers things"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"friend"}]}],["$","td",null,{"children":"60%"}],["$","td",null,{"children":"Genuine care beneath snark, inside jokes"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"closeFriend"}]}],["$","td",null,{"children":"80%"}],["$","td",null,{"children":"Protective, drops act occasionally"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"family"}]}],["$","td",null,{"children":"95%"}],["$","td",null,{"children":"Would die for them (not that she'd admit it)"}]]}]]}]]}],"\n",["$","h2",null,{"id":"relationship-dimensions","children":["$","a",null,{"href":"#relationship-dimensions","className":"anchor-link","children":"Relationship Dimensions"}]}],"\n",["$","p",null,{"children":"Each user has four relationship metrics:"}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Dimension"}],["$","th",null,{"children":"Description"}],["$","th",null,{"children":"Range"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"affection"}]}],["$","td",null,{"children":"How much Beboa likes them"}],["$","td",null,{"children":"0.0 - 1.0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"trust"}]}],["$","td",null,{"children":"How much she trusts them"}],["$","td",null,{"children":"0.0 - 1.0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"familiarity"}]}],["$","td",null,{"children":"How well she knows them"}],["$","td",null,{"children":"0.0 - 1.0"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"rivalry"}]}],["$","td",null,{"children":"Competitive energy"}],["$","td",null,{"children":"0.0 - 1.0"}]]}]]}]]}],"\n",["$","h2",null,{"id":"llm-powered-relationship-evaluation","children":["$","a",null,{"href":"#llm-powered-relationship-evaluation","className":"anchor-link","children":"LLM-Powered Relationship Evaluation"}]}],"\n",["$","p",null,{"children":"The system uses an LLM to evaluate each interaction and determine appropriate relationship changes."}],"\n",["$","h3",null,{"id":"how-it-works","children":["$","a",null,{"href":"#how-it-works","className":"anchor-link","children":"How It Works"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"User Message + Bot Response\n          │\n          ▼\n┌─────────────────────────────────────┐\n│    LLM Relationship Evaluator       │\n│    (x-ai/grok-4.1-fast)             │\n│                                     │\n│  Evaluates:                         │\n│  - Interaction quality              │\n│  - Emotional depth                  │\n│  - Trust indicators                 │\n│  - Relationship deltas              │\n└──────────────┬──────────────────────┘\n               │\n               ▼\n┌─────────────────────────────────────┐\n│  Apply Bounded Deltas               │\n│  (max ±0.05 affection/interaction)  │\n└──────────────┬──────────────────────┘\n               │\n               ▼\n┌─────────────────────────────────────┐\n│  Extract Moments & Inside Jokes     │\n└─────────────────────────────────────┘"}],"\n",["$","h3",null,{"id":"llm-evaluation-output","children":["$","a",null,{"href":"#llm-evaluation-output","className":"anchor-link","children":"LLM Evaluation Output"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Example LLM relationship evaluation\n{\n  interactionQuality: \"meaningful\",  // shallow|normal|meaningful|deep\n  emotionalDepth: 0.7,\n  trustIndicators: {\n    sharedVulnerability: true,       // User opened up\n    askedForHelp: false,\n    showedCare: true,                // User showed care for Beboa\n    wasHonest: true\n  },\n  relationshipDeltas: {\n    affection: 0.03,                 // Positive interaction\n    trust: 0.02,                     // Trust-building moment\n    familiarity: 0.015,              // Always positive\n    rivalry: 0                       // No competitive element\n  },\n  suggestedInsideJoke: \"that time they called me 'danger noodle'\",\n  noteworthyMoment: \"User shared they were having a tough day\",\n  reasoning: \"User showed vulnerability and Beboa responded with care\"\n}"}],"\n",["$","h3",null,{"id":"interaction-quality-levels","children":["$","a",null,{"href":"#interaction-quality-levels","className":"anchor-link","children":"Interaction Quality Levels"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Quality"}],["$","th",null,{"children":"Description"}],["$","th",null,{"children":"Typical Deltas"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"shallow"}]}],["$","td",null,{"children":"Brief, surface-level"}],["$","td",null,{"children":"+0.005 familiarity"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"normal"}]}],["$","td",null,{"children":"Standard conversation"}],["$","td",null,{"children":"+0.01 familiarity, +0.002 trust"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"meaningful"}]}],["$","td",null,{"children":"Emotional exchange"}],["$","td",null,{"children":"+0.02-0.03 affection/trust"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"deep"}]}],["$","td",null,{"children":"Significant moment"}],["$","td",null,{"children":"+0.03-0.05 multiple dimensions"}]]}]]}]]}],"\n",["$","h3",null,{"id":"trust-indicators","children":["$","a",null,{"href":"#trust-indicators","className":"anchor-link","children":"Trust Indicators"}]}],"\n",["$","p",null,{"children":"The LLM detects these trust-building patterns:"}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Indicator"}],["$","th",null,{"children":"Effect"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"sharedVulnerability"}]}],["$","td",null,{"children":"+trust, +protectiveness trait"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"askedForHelp"}]}],["$","td",null,{"children":"+trust, +affection"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"showedCare"}]}],["$","td",null,{"children":"+affection, +agreeableness trait"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"wasHonest"}]}],["$","td",null,{"children":"+trust"}]]}]]}]]}],"\n",["$","h2",null,{"id":"bounded-deltas","children":["$","a",null,{"href":"#bounded-deltas","className":"anchor-link","children":"Bounded Deltas"}]}],"\n",["$","p",null,{"children":"To prevent exploitation, all deltas are clamped:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"relationshipDeltas: {\n  affection: Math.max(-0.05, Math.min(0.05, delta)),  // ±5% max\n  trust: Math.max(-0.03, Math.min(0.03, delta)),       // ±3% max\n  familiarity: Math.max(0.005, Math.min(0.02, delta)), // Always positive\n  rivalry: Math.max(-0.02, Math.min(0.02, delta))      // ±2% max\n}"}],"\n",["$","h2",null,{"id":"fallback-system","children":["$","a",null,{"href":"#fallback-system","className":"anchor-link","children":"Fallback System"}]}],"\n",["$","p",null,{"children":"When LLM evaluation is unavailable, the system uses fixed deltas:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Fallback relationship updates\nconst relUpdates = {\n  familiarity: 0.01,                                    // Always increases\n  affection: sentiment > 0 ? 0.005 : sentiment < -0.3 ? -0.002 : 0,\n  trust: isVulnerable ? 0.02 : 0.002\n};"}],"\n",["$","h2",null,{"id":"relationship-effects","children":["$","a",null,{"href":"#relationship-effects","className":"anchor-link","children":"Relationship Effects"}]}],"\n",["$","h3",null,{"id":"on-response-style","children":["$","a",null,{"href":"#on-response-style","className":"anchor-link","children":"On Response Style"}]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Stranger:"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"\"And you are...? I don't recall asking for your opinion.\""}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Friend:"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"\"Ugh, it's you again. I SUPPOSE I can help... but only because you're not completely insufferable.\""}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Family:"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"\"Hey! There you are! I was... I mean, I WASN'T waiting for you or anything! ...how was your day?\""}],"\n"]}],"\n",["$","h3",null,{"id":"on-personality-evolution","children":["$","a",null,{"href":"#on-personality-evolution","className":"anchor-link","children":"On Personality Evolution"}]}],"\n",["$","p",null,{"children":"High-trust relationships affect Beboa's traits:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"if (llmRelEval.trustIndicators?.sharedVulnerability) {\n  evolveTrait('vulnerability', 0.005, 'shared_vulnerability');\n  evolveTrait('protectiveness', 0.003, 'trusted_with_vulnerability');\n}\nif (llmRelEval.trustIndicators?.showedCare) {\n  evolveTrait('agreeableness', 0.003, 'showed_care');\n}"}],"\n",["$","h2",null,{"id":"inside-jokes--noteworthy-moments","children":["$","a",null,{"href":"#inside-jokes--noteworthy-moments","className":"anchor-link","children":"Inside Jokes & Noteworthy Moments"}]}],"\n",["$","p",null,{"children":"The LLM can detect and store:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Inside Jokes"}],": Callback-worthy phrases or events"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Noteworthy Moments"}],": Significant interactions to reference later"]}],"\n"]}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Stored for future context\n{\n  insideJokes: [\"danger noodle incident\", \"the bebits heist\"],\n  notes: [\n    { note: \"User's birthday is March 15\", time: 1704067200000 },\n    { note: \"Gets anxious about work deadlines\", time: 1704153600000 }\n  ]\n}"}],"\n",["$","h2",null,{"id":"viewing-relationships","children":["$","a",null,{"href":"#viewing-relationships","className":"anchor-link","children":"Viewing Relationships"}]}],"\n",["$","h3",null,{"id":"via-jarvis-mode","children":["$","a",null,{"href":"#via-jarvis-mode","className":"anchor-link","children":"Via Jarvis Mode"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"\"how does beboa feel about @user\"\n\"user info @user\"\n\"what's @user's relationship status\""}],"\n",["$","h3",null,{"id":"via-code","children":["$","a",null,{"href":"#via-code","className":"anchor-link","children":"Via Code"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"import { getRelationship } from './services/personality.js';\n\nconst rel = getRelationship(userId);\nconsole.log(`Stage: ${rel.stage.label}`);\nconsole.log(`Affection: ${(rel.affection * 100).toFixed(0)}%`);\nconsole.log(`Trust: ${(rel.trust * 100).toFixed(0)}%`);\nconsole.log(`Familiarity: ${(rel.familiarity * 100).toFixed(0)}%`);"}],"\n",["$","h2",null,{"id":"configuration","children":["$","a",null,{"href":"#configuration","className":"anchor-link","children":"Configuration"}]}],"\n",["$","$Lf",null,{"language":"env","children":"# Enable LLM relationship evaluation\nLLM_EVALUATOR_ENABLED=true\n\n# Model for evaluation\nLLM_EVALUATOR_MODEL=x-ai/grok-4.1-fast\n\n# Rate limit (shared with mood evaluator)\nLLM_EVALUATOR_RATE_LIMIT=30"}],"\n",["$","h2",null,{"id":"database-schema","children":["$","a",null,{"href":"#database-schema","className":"anchor-link","children":"Database Schema"}]}],"\n",["$","$Lf",null,{"language":"sql","children":"CREATE TABLE user_relationships (\n    user_id TEXT PRIMARY KEY,\n    affection REAL DEFAULT 0.3,\n    trust REAL DEFAULT 0.3,\n    familiarity REAL DEFAULT 0.1,\n    rivalry REAL DEFAULT 0,\n    inside_jokes TEXT DEFAULT '[]',\n    nickname TEXT,\n    last_interaction TEXT,\n    interaction_count INTEGER DEFAULT 0,\n    relationship_stage TEXT DEFAULT 'stranger',\n    notes TEXT DEFAULT '[]'\n);"}],"\n",["$","h2",null,{"id":"best-practices","children":["$","a",null,{"href":"#best-practices","className":"anchor-link","children":"Best Practices"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Trust the LLM evaluation"}]," - It captures nuance better than fixed increments"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Monitor interaction quality"}]," - Logs show ",["$","code",null,{"children":"[PERSONALITY] Using LLM relationship eval: meaningful"}]]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Don't game the system"}]," - Bounded deltas prevent rapid manipulation"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Check inside jokes"}]," - They make conversations feel personal"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Use noteworthy moments"}]," - Reference past interactions naturally"]}],"\n"]}]]
