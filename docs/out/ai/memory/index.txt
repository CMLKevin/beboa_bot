3:I[4707,[],""]
5:I[6423,[],""]
6:I[2060,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"ThemeProvider"]
7:I[4351,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Header"]
8:I[9399,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Sidebar"]
4:["slug","ai/memory","c"]
0:["FeUt14WxB_Uw-6zJdn3nr",[[["",{"children":[["slug","ai/memory","c"],{"children":["__PAGE__?{\"slug\":[\"ai\",\"memory\"]}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","ai/memory","c"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3cf59f0fd0496c15.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_f367f3 __variable_a06722 font-sans","children":["$","$L6",null,{"children":["$","div",null,{"className":"min-h-screen bg-[var(--bg-primary)] transition-colors duration-200","children":[["$","$L7",null,{}],["$","div",null,{"className":"flex","children":[["$","$L8",null,{}],["$","main",null,{"className":"flex-1 min-w-0 lg:pl-[var(--sidebar-width)]","children":["$","div",null,{"className":"max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]}]]}]]}]}]}]}]],null],null],["$L9",null]]]]
a:I[6430,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"Breadcrumbs"]
b:I[9078,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CopyPageButton"]
d:I[3308,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"PageNavigation"]
e:I[5321,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"TableOfContents"]
2:[["$","article",null,{"className":"animate-in","children":[["$","div",null,{"className":"flex items-start justify-between gap-4 mb-6","children":[["$","$La",null,{}],["$","$Lb",null,{}]]}],["$","h1",null,{"children":"User Memory"}],["$","p",null,{"className":"text-lg text-[var(--text-secondary)] mb-8 -mt-2","children":"Vector-based per-user long-term memory using text embeddings."}],["$","div",null,{"className":"prose-custom","children":"$Lc"}],["$","$Ld",null,{}]]}],["$","$Le",null,{}]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"User Memory - Beboa Docs"}],["$","meta","3",{"name":"description","content":"Vector-based per-user long-term memory using text embeddings."}],["$","link","4",{"rel":"icon","href":"/favicon.ico"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
f:I[5045,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CodeBlock"]
c:[["$","h1",null,{"id":"user-memory-system","children":"User Memory System"}],"\n",["$","p",null,{"children":"Beboa uses vector embeddings for per-user long-term memory, enabling contextual recall of facts about individual users."}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"See Also"}],": For server-wide awareness of all messages, see ",["$","a",null,{"href":"/ai/server-memory","children":"Server-Wide Memory"}],"."]}],"\n"]}],"\n",["$","h2",null,{"id":"how-it-works","children":["$","a",null,{"href":"#how-it-works","className":"anchor-link","children":"How It Works"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Extraction"}],": AI identifies important facts from conversations"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Embedding"}],": Facts are converted to 1536-dimension vectors"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Storage"}],": Vectors stored in SQLite with metadata"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Retrieval"}],": Cosine similarity finds relevant memories"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Context"}],": Retrieved memories inform responses"]}],"\n"]}],"\n",["$","h2",null,{"id":"memory-types","children":["$","a",null,{"href":"#memory-types","className":"anchor-link","children":"Memory Types"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Type"}],["$","th",null,{"children":"Description"}],["$","th",null,{"children":"Example"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"fact"}]}],["$","td",null,{"children":"Objective information"}],["$","td",null,{"children":"\"User works as a programmer\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"preference"}]}],["$","td",null,{"children":"User likes/dislikes"}],["$","td",null,{"children":"\"User prefers Python over JavaScript\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"event"}]}],["$","td",null,{"children":"Something that happened"}],["$","td",null,{"children":"\"User's birthday was last week\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"relationship"}]}],["$","td",null,{"children":"Social connections"}],["$","td",null,{"children":"\"User has a sister named Sarah\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"emotional"}]}],["$","td",null,{"children":"Feelings/reactions"}],["$","td",null,{"children":"\"User was sad about job loss\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"context"}]}],["$","td",null,{"children":"Situational info"}],["$","td",null,{"children":"\"User is working on a game project\""}]]}]]}]]}],"\n",["$","h2",null,{"id":"configuration","children":["$","a",null,{"href":"#configuration","className":"anchor-link","children":"Configuration"}]}],"\n",["$","$Lf",null,{"language":"env","children":"# Enable memory system\nMEMORY_ENABLED=true\n\n# Auto-extract memories from conversations\nMEMORY_AUTO_EXTRACT=true\n\n# Embedding model\nEMBEDDING_MODEL=openai/text-embedding-3-small\n\n# Memory extraction model\nEXTRACTION_MODEL=x-ai/grok-4.1-fast"}],"\n",["$","h2",null,{"id":"memory-extraction","children":["$","a",null,{"href":"#memory-extraction","className":"anchor-link","children":"Memory Extraction"}]}],"\n",["$","p",null,{"children":["When ",["$","code",null,{"children":"MEMORY_AUTO_EXTRACT=true"}],", after each conversation:"]}],"\n",["$","$Lf",null,{"language":"javascript","children":"const extractionPrompt = `\nAnalyze this conversation and extract important facts about the user.\nReturn a JSON array of memories:\n\n[\n  {\n    \"content\": \"User is learning guitar\",\n    \"type\": \"fact\",\n    \"importance\": 0.7\n  }\n]\n\nOnly extract genuinely useful information. Skip small talk.\n`;"}],"\n",["$","h3",null,{"id":"importance-scoring","children":["$","a",null,{"href":"#importance-scoring","className":"anchor-link","children":"Importance Scoring"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Score"}],["$","th",null,{"children":"Meaning"}],["$","th",null,{"children":"Examples"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"0.1-0.3"}],["$","td",null,{"children":"Minor detail"}],["$","td",null,{"children":"\"User said 'lol'\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"0.4-0.6"}],["$","td",null,{"children":"Useful context"}],["$","td",null,{"children":"\"User is busy with exams\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"0.7-0.8"}],["$","td",null,{"children":"Important fact"}],["$","td",null,{"children":"\"User has a pet dog named Max\""}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"0.9-1.0"}],["$","td",null,{"children":"Critical info"}],["$","td",null,{"children":"\"User's birthday is March 15\""}]]}]]}]]}],"\n",["$","h2",null,{"id":"memory-retrieval","children":["$","a",null,{"href":"#memory-retrieval","className":"anchor-link","children":"Memory Retrieval"}]}],"\n",["$","p",null,{"children":"When generating responses, relevant memories are fetched:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Get top 5 memories relevant to current message\nconst memories = await searchMemories(userId, currentMessage, 5);\n\n// Memories are included in context:\nconst memoryContext = memories.map(m =>\n    `- ${m.content} (remembered ${timeAgo(m.created_at)})`\n).join('\\n');"}],"\n",["$","h3",null,{"id":"similarity-threshold","children":["$","a",null,{"href":"#similarity-threshold","className":"anchor-link","children":"Similarity Threshold"}]}],"\n",["$","p",null,{"children":"Only memories above 0.7 cosine similarity are retrieved:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"const SIMILARITY_THRESHOLD = 0.7;\nconst relevantMemories = memories.filter(m => m.similarity >= SIMILARITY_THRESHOLD);"}],"\n",["$","h2",null,{"id":"database-schema","children":["$","a",null,{"href":"#database-schema","className":"anchor-link","children":"Database Schema"}]}],"\n",["$","$Lf",null,{"language":"sql","children":"CREATE TABLE memories (\n    id INTEGER PRIMARY KEY,\n    user_id TEXT,\n    content TEXT,\n    memory_type TEXT,\n    importance REAL DEFAULT 0.5,\n    embedding BLOB,  -- 1536-dim vector as binary\n    created_at TEXT,\n    last_accessed TEXT,\n    access_count INTEGER DEFAULT 0\n);\n\nCREATE INDEX idx_memories_user ON memories(user_id);\nCREATE INDEX idx_memories_type ON memories(memory_type);"}],"\n",["$","h2",null,{"id":"viewing-memories","children":["$","a",null,{"href":"#viewing-memories","className":"anchor-link","children":"Viewing Memories"}]}],"\n",["$","h3",null,{"id":"via-slash-command","children":["$","a",null,{"href":"#via-slash-command","className":"anchor-link","children":"Via Slash Command"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"/memories @user"}],"\n",["$","h3",null,{"id":"via-jarvis-mode","children":["$","a",null,{"href":"#via-jarvis-mode","className":"anchor-link","children":"Via Jarvis Mode"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"\"what do you remember about @user\"\n\"search memories for cats\"\n\"show @user's memories\""}],"\n",["$","h2",null,{"id":"managing-memories","children":["$","a",null,{"href":"#managing-memories","className":"anchor-link","children":"Managing Memories"}]}],"\n",["$","h3",null,{"id":"add-memory-jarvis-mode","children":["$","a",null,{"href":"#add-memory-jarvis-mode","className":"anchor-link","children":"Add Memory (Jarvis Mode)"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"\"remember that @user likes pizza\"\n\"note: @user is allergic to peanuts\"\n\"add memory: @user's birthday is June 5th\""}],"\n",["$","h3",null,{"id":"search-memories-jarvis-mode","children":["$","a",null,{"href":"#search-memories-jarvis-mode","className":"anchor-link","children":"Search Memories (Jarvis Mode)"}]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"\"search memories for birthday\"\n\"what did @user say about work\"\n\"find memories about games\""}],"\n",["$","h3",null,{"id":"delete-memory-code-only","children":["$","a",null,{"href":"#delete-memory-code-only","className":"anchor-link","children":"Delete Memory (Code only)"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"import { deleteMemory } from './services/memory.js';\nawait deleteMemory(memoryId);"}],"\n",["$","h2",null,{"id":"memory-decay","children":["$","a",null,{"href":"#memory-decay","className":"anchor-link","children":"Memory Decay"}]}],"\n",["$","p",null,{"children":"Old, unaccessed memories decay in importance:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Monthly decay\nconst monthsSinceAccess = getMonthsSince(lastAccessed);\nconst decayFactor = Math.pow(0.95, monthsSinceAccess);\nmemory.importance *= decayFactor;\n\n// Remove if importance drops below 0.1\nif (memory.importance < 0.1) {\n    await deleteMemory(memory.id);\n}"}],"\n",["$","h2",null,{"id":"memory-in-responses","children":["$","a",null,{"href":"#memory-in-responses","className":"anchor-link","children":"Memory in Responses"}]}],"\n",["$","p",null,{"children":"Beboa naturally incorporates memories:"}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Without memory:"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"\"What do you want? I don't know anything about you.\""}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"With memory:"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"\"Oh, you're back! How's that guitar practice going? Still struggling with F chord? Hehe~\""}],"\n"]}],"\n",["$","h2",null,{"id":"vector-operations","children":["$","a",null,{"href":"#vector-operations","className":"anchor-link","children":"Vector Operations"}]}],"\n",["$","h3",null,{"id":"embedding-generation","children":["$","a",null,{"href":"#embedding-generation","className":"anchor-link","children":"Embedding Generation"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"async function generateEmbedding(text) {\n    const response = await openrouter.embeddings.create({\n        model: process.env.EMBEDDING_MODEL,\n        input: text\n    });\n    return response.data[0].embedding;\n}"}],"\n",["$","h3",null,{"id":"cosine-similarity","children":["$","a",null,{"href":"#cosine-similarity","className":"anchor-link","children":"Cosine Similarity"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"function cosineSimilarity(a, b) {\n    let dotProduct = 0;\n    let normA = 0;\n    let normB = 0;\n    for (let i = 0; i < a.length; i++) {\n        dotProduct += a[i] * b[i];\n        normA += a[i] * a[i];\n        normB += b[i] * b[i];\n    }\n    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\n}"}],"\n",["$","h2",null,{"id":"best-practices","children":["$","a",null,{"href":"#best-practices","className":"anchor-link","children":"Best Practices"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Filter noise"}]," - Don't extract trivial information"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Respect privacy"}]," - Don't store sensitive personal data"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Prune regularly"}]," - Remove low-value memories"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Test retrieval"}]," - Ensure relevant memories surface"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Balance extraction"}]," - Too many memories slow retrieval"]}],"\n"]}],"\n",["$","h2",null,{"id":"performance-notes","children":["$","a",null,{"href":"#performance-notes","className":"anchor-link","children":"Performance Notes"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Embedding generation: ~100-200ms per request"}],"\n",["$","li",null,{"children":"Vector search: O(n) over all user memories"}],"\n",["$","li",null,{"children":"For large memory sets (>1000), consider batching"}],"\n",["$","li",null,{"children":"Embedding model costs: ~$0.00002 per 1K tokens"}],"\n"]}],"\n",["$","h2",null,{"id":"user-memory-vs-server-memory","children":["$","a",null,{"href":"#user-memory-vs-server-memory","className":"anchor-link","children":"User Memory vs Server Memory"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Feature"}],["$","th",null,{"children":"User Memory"}],["$","th",null,{"children":"Server Memory"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"Scope"}],["$","td",null,{"children":"Per-user facts"}],["$","td",null,{"children":"All server messages"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Source"}],["$","td",null,{"children":"AI-extracted facts"}],["$","td",null,{"children":"Raw message content"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Storage"}],["$","td",null,{"children":[["$","code",null,{"children":"memories"}]," table"]}],["$","td",null,{"children":[["$","code",null,{"children":"server_messages"}]," table"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Retrieval"}],["$","td",null,{"children":"User-specific search"}],["$","td",null,{"children":"Server-wide semantic search"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Purpose"}],["$","td",null,{"children":"Remember user preferences"}],["$","td",null,{"children":"Ambient conversation awareness"}]]}]]}]]}],"\n",["$","p",null,{"children":["Both systems complement each other - User Memory stores personal facts, while ",["$","a",null,{"href":"/ai/server-memory","children":"Server Memory"}]," provides conversational context."]}]]
