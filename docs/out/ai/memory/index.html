<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/443896d591e4f761-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/3cf59f0fd0496c15.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-e5714bf66625afb9.js"/><script src="/_next/static/chunks/fd9d1056-e1b8fc02af805f43.js" async=""></script><script src="/_next/static/chunks/117-bf803eaaef7a29e0.js" async=""></script><script src="/_next/static/chunks/main-app-b6379442ececfbb8.js" async=""></script><script src="/_next/static/chunks/972-68a674eeca97bbbb.js" async=""></script><script src="/_next/static/chunks/646-1e67c3e800eb58dd.js" async=""></script><script src="/_next/static/chunks/app/layout-4b75b78215e64ea2.js" async=""></script><script src="/_next/static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js" async=""></script><title>User Memory - Beboa Docs</title><meta name="description" content="Vector-based per-user long-term memory using text embeddings."/><link rel="icon" href="/favicon.ico"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_f367f3 __variable_a06722 font-sans"><div style="visibility:hidden"><div class="min-h-screen bg-[var(--bg-primary)] transition-colors duration-200"><header class="sticky top-0 z-40 w-full h-[var(--header-height)] bg-[var(--bg-secondary)] border-b border-[var(--border)]"><div class="flex items-center justify-between h-full px-4 lg:px-6"><div class="flex items-center gap-6"><button class="lg:hidden p-2 -ml-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-5 h-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><a class="flex items-center gap-2 text-lg font-semibold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors" href="/"><span class="text-xl">üêç</span><span class="hidden sm:inline">Beboa</span><span class="hidden sm:inline text-xs font-normal text-[var(--text-muted)] ml-1">Docs</span></a><nav class="hidden lg:flex items-center gap-1"><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/">User Guide</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--accent)] bg-[var(--accent-light)]" href="/ai/">AI Systems</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/">Jarvis Mode</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/structure/">Reference</a></nav></div><div class="flex items-center gap-3"><div class="hidden sm:block"><button class="flex items-center gap-2 px-3 py-2 text-sm text-[var(--text-muted)] bg-[var(--bg-tertiary)] hover:bg-[var(--border)] rounded-lg border border-[var(--border)] transition-colors w-full max-w-[240px]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search w-4 h-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><span class="flex-1 text-left">Search docs...</span><kbd class="hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-xs font-medium text-[var(--text-muted)] bg-[var(--bg-secondary)] rounded border border-[var(--border)]"><span class="text-xs">‚åò</span>K</kbd></button></div><button class="sm:hidden p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Search"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button><a href="https://github.com/CMLKevin/beboa_evo" target="_blank" rel="noopener noreferrer" class="hidden sm:flex p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github w-5 h-5"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><button class="p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Switch to dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon w-5 h-5"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></div></header><aside class="fixed inset-y-0 left-0 z-50 w-72 bg-[var(--bg-secondary)] border-r border-[var(--border)] transform transition-transform duration-300 ease-in-out lg:hidden -translate-x-full"><div class="flex items-center justify-between h-[var(--header-height)] px-4 border-b border-[var(--border)]"><a class="flex items-center gap-2 text-lg font-semibold text-[var(--text-primary)]" href="/"><span class="text-xl">üêç</span><span>Beboa</span></a><button class="p-2 -mr-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Close menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x w-5 h-5"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button></div><div class="p-4 border-b border-[var(--border)]"><div class="flex flex-wrap gap-2"><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/">User Guide</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--accent)] bg-[var(--accent-light)]" href="/ai/">AI Systems</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/jarvis/">Jarvis Mode</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/architecture/structure/">Reference</a></div></div><nav class="overflow-y-auto h-[calc(100%-128px)] py-4 px-4"><ul class="space-y-1"><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Getting Started</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/">Home</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/installation/">Installation</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/configuration/">Configuration</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/quickstart/">Quick Start</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Features</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/checkins/">Daily Check-ins</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/bebits/">Bebits &amp; Rewards</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/chat/">AI Chat</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">AI Systems</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--accent)] bg-[var(--accent-light)] font-medium" href="/ai/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/personality/">Dynamic Personality</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/moods/">Mood System</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/relationships/">Relationships</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--accent)] bg-[var(--accent-light)] font-medium" href="/ai/memory/">Semantic Memory</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/llm-evaluator/">LLM Evaluator</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/tools/">Tool Calls</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Jarvis Mode 2.0</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/commands/">Commands Reference</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/parsing/">Intent Parsing</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/fun/">Fun Commands</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Commands</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/commands/user/">User Commands</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/commands/admin/">Admin Commands</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Architecture</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/structure/">Project Structure</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/database/">Database Schema</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/services/">Services</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/flow/">Message Flow</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Developer Guide</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/commands/">Extending Commands</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/tools/">Custom Tools</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/migrations/">Database Migrations</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/api/">API Reference</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Deployment</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/railway/">Railway</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/vps/">VPS Setup</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/docker/">Docker</a></li></ul></li></ul></nav></aside><div class="flex"><aside class="hidden lg:block fixed top-[var(--header-height)] left-0 bottom-0 w-[var(--sidebar-width)] border-r border-[var(--border)] bg-[var(--bg-secondary)] overflow-y-auto"><nav class="py-6 px-4"><ul class="space-y-6"><li><div class="px-3 mb-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">AI Systems</div><ul class="space-y-0.5"><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/">Overview</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/personality/">Dynamic Personality</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/moods/">Mood System</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/relationships/">Relationships</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/memory/">Semantic Memory</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/llm-evaluator/">LLM Evaluator</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/tools/">Tool Calls</a></li></ul></li></ul></nav></aside><main class="flex-1 min-w-0 lg:pl-[var(--sidebar-width)]"><div class="max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12"><article class="animate-in"><div class="flex items-start justify-between gap-4 mb-6"><nav aria-label="Breadcrumb" class="flex items-center gap-1.5 text-sm mb-4"><div class="flex items-center gap-1.5"><a class="text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors" href="/ai/">AI Systems</a></div></nav><button class="flex items-center gap-1.5 px-3 py-1.5 text-sm text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)] rounded-md transition-colors border border-transparent hover:border-[var(--border)]" title="Copy page content"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy page</span></button></div><h1>User Memory</h1><p class="text-lg text-[var(--text-secondary)] mb-8 -mt-2">Vector-based per-user long-term memory using text embeddings.</p><div class="prose-custom"><h1 id="user-memory-system">User Memory System</h1>
<p>Beboa uses vector embeddings for per-user long-term memory, enabling contextual recall of facts about individual users.</p>
<blockquote>
<p><strong>See Also</strong>: For server-wide awareness of all messages, see <a href="/ai/server-memory">Server-Wide Memory</a>.</p>
</blockquote>
<h2 id="how-it-works"><a href="#how-it-works" class="anchor-link">How It Works</a></h2>
<ol>
<li><strong>Extraction</strong>: AI identifies important facts from conversations</li>
<li><strong>Embedding</strong>: Facts are converted to 1536-dimension vectors</li>
<li><strong>Storage</strong>: Vectors stored in SQLite with metadata</li>
<li><strong>Retrieval</strong>: Cosine similarity finds relevant memories</li>
<li><strong>Context</strong>: Retrieved memories inform responses</li>
</ol>
<h2 id="memory-types"><a href="#memory-types" class="anchor-link">Memory Types</a></h2>
<table><thead><tr><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>fact</code></td><td>Objective information</td><td>&quot;User works as a programmer&quot;</td></tr><tr><td><code>preference</code></td><td>User likes/dislikes</td><td>&quot;User prefers Python over JavaScript&quot;</td></tr><tr><td><code>event</code></td><td>Something that happened</td><td>&quot;User&#x27;s birthday was last week&quot;</td></tr><tr><td><code>relationship</code></td><td>Social connections</td><td>&quot;User has a sister named Sarah&quot;</td></tr><tr><td><code>emotional</code></td><td>Feelings/reactions</td><td>&quot;User was sad about job loss&quot;</td></tr><tr><td><code>context</code></td><td>Situational info</td><td>&quot;User is working on a game project&quot;</td></tr></tbody></table>
<h2 id="configuration"><a href="#configuration" class="anchor-link">Configuration</a></h2>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">env</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span># Enable memory system</span></div><div class="px-4"><span>MEMORY_ENABLED=true</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Auto-extract memories from conversations</span></div><div class="px-4"><span>MEMORY_AUTO_EXTRACT=true</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Embedding model</span></div><div class="px-4"><span>EMBEDDING_MODEL=openai/text-embedding-3-small</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Memory extraction model</span></div><div class="px-4"><span>EXTRACTION_MODEL=x-ai/grok-4.1-fast</span></div></code></pre></div>
<h2 id="memory-extraction"><a href="#memory-extraction" class="anchor-link">Memory Extraction</a></h2>
<p>When <code>MEMORY_AUTO_EXTRACT=true</code>, after each conversation:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const extractionPrompt = `</span></div><div class="px-4"><span>Analyze this conversation and extract important facts about the user.</span></div><div class="px-4"><span>Return a JSON array of memories:</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>[</span></div><div class="px-4"><span>  {</span></div><div class="px-4"><span>    &quot;content&quot;: &quot;User is learning guitar&quot;,</span></div><div class="px-4"><span>    &quot;type&quot;: &quot;fact&quot;,</span></div><div class="px-4"><span>    &quot;importance&quot;: 0.7</span></div><div class="px-4"><span>  }</span></div><div class="px-4"><span>]</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>Only extract genuinely useful information. Skip small talk.</span></div><div class="px-4"><span>`;</span></div></code></pre></div>
<h3 id="importance-scoring"><a href="#importance-scoring" class="anchor-link">Importance Scoring</a></h3>
<table><thead><tr><th>Score</th><th>Meaning</th><th>Examples</th></tr></thead><tbody><tr><td>0.1-0.3</td><td>Minor detail</td><td>&quot;User said &#x27;lol&#x27;&quot;</td></tr><tr><td>0.4-0.6</td><td>Useful context</td><td>&quot;User is busy with exams&quot;</td></tr><tr><td>0.7-0.8</td><td>Important fact</td><td>&quot;User has a pet dog named Max&quot;</td></tr><tr><td>0.9-1.0</td><td>Critical info</td><td>&quot;User&#x27;s birthday is March 15&quot;</td></tr></tbody></table>
<h2 id="memory-retrieval"><a href="#memory-retrieval" class="anchor-link">Memory Retrieval</a></h2>
<p>When generating responses, relevant memories are fetched:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>// Get top 5 memories relevant to current message</span></div><div class="px-4"><span>const memories = await searchMemories(userId, currentMessage, 5);</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>// Memories are included in context:</span></div><div class="px-4"><span>const memoryContext = memories.map(m =&gt;</span></div><div class="px-4"><span>    `- ${m.content} (remembered ${timeAgo(m.created_at)})`</span></div><div class="px-4"><span>).join(&#x27;\n&#x27;);</span></div></code></pre></div>
<h3 id="similarity-threshold"><a href="#similarity-threshold" class="anchor-link">Similarity Threshold</a></h3>
<p>Only memories above 0.7 cosine similarity are retrieved:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const SIMILARITY_THRESHOLD = 0.7;</span></div><div class="px-4"><span>const relevantMemories = memories.filter(m =&gt; m.similarity &gt;= SIMILARITY_THRESHOLD);</span></div></code></pre></div>
<h2 id="database-schema"><a href="#database-schema" class="anchor-link">Database Schema</a></h2>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">sql</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>CREATE TABLE memories (</span></div><div class="px-4"><span>    id INTEGER PRIMARY KEY,</span></div><div class="px-4"><span>    user_id TEXT,</span></div><div class="px-4"><span>    content TEXT,</span></div><div class="px-4"><span>    memory_type TEXT,</span></div><div class="px-4"><span>    importance REAL DEFAULT 0.5,</span></div><div class="px-4"><span>    embedding BLOB,  -- 1536-dim vector as binary</span></div><div class="px-4"><span>    created_at TEXT,</span></div><div class="px-4"><span>    last_accessed TEXT,</span></div><div class="px-4"><span>    access_count INTEGER DEFAULT 0</span></div><div class="px-4"><span>);</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>CREATE INDEX idx_memories_user ON memories(user_id);</span></div><div class="px-4"><span>CREATE INDEX idx_memories_type ON memories(memory_type);</span></div></code></pre></div>
<h2 id="viewing-memories"><a href="#viewing-memories" class="anchor-link">Viewing Memories</a></h2>
<h3 id="via-slash-command"><a href="#via-slash-command" class="anchor-link">Via Slash Command</a></h3>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>/memories @user</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h3 id="via-jarvis-mode"><a href="#via-jarvis-mode" class="anchor-link">Via Jarvis Mode</a></h3>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>&quot;what do you remember about @user&quot;</span></div><div class="px-4"><span>&quot;search memories for cats&quot;</span></div><div class="px-4"><span>&quot;show @user&#x27;s memories&quot;</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="managing-memories"><a href="#managing-memories" class="anchor-link">Managing Memories</a></h2>
<h3 id="add-memory-jarvis-mode"><a href="#add-memory-jarvis-mode" class="anchor-link">Add Memory (Jarvis Mode)</a></h3>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>&quot;remember that @user likes pizza&quot;</span></div><div class="px-4"><span>&quot;note: @user is allergic to peanuts&quot;</span></div><div class="px-4"><span>&quot;add memory: @user&#x27;s birthday is June 5th&quot;</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h3 id="search-memories-jarvis-mode"><a href="#search-memories-jarvis-mode" class="anchor-link">Search Memories (Jarvis Mode)</a></h3>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>&quot;search memories for birthday&quot;</span></div><div class="px-4"><span>&quot;what did @user say about work&quot;</span></div><div class="px-4"><span>&quot;find memories about games&quot;</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h3 id="delete-memory-code-only"><a href="#delete-memory-code-only" class="anchor-link">Delete Memory (Code only)</a></h3>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>import { deleteMemory } from &#x27;./services/memory.js&#x27;;</span></div><div class="px-4"><span>await deleteMemory(memoryId);</span></div></code></pre></div>
<h2 id="memory-decay"><a href="#memory-decay" class="anchor-link">Memory Decay</a></h2>
<p>Old, unaccessed memories decay in importance:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>// Monthly decay</span></div><div class="px-4"><span>const monthsSinceAccess = getMonthsSince(lastAccessed);</span></div><div class="px-4"><span>const decayFactor = Math.pow(0.95, monthsSinceAccess);</span></div><div class="px-4"><span>memory.importance *= decayFactor;</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>// Remove if importance drops below 0.1</span></div><div class="px-4"><span>if (memory.importance &lt; 0.1) {</span></div><div class="px-4"><span>    await deleteMemory(memory.id);</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="memory-in-responses"><a href="#memory-in-responses" class="anchor-link">Memory in Responses</a></h2>
<p>Beboa naturally incorporates memories:</p>
<p><strong>Without memory:</strong></p>
<blockquote>
<p>&quot;What do you want? I don&#x27;t know anything about you.&quot;</p>
</blockquote>
<p><strong>With memory:</strong></p>
<blockquote>
<p>&quot;Oh, you&#x27;re back! How&#x27;s that guitar practice going? Still struggling with F chord? Hehe~&quot;</p>
</blockquote>
<h2 id="vector-operations"><a href="#vector-operations" class="anchor-link">Vector Operations</a></h2>
<h3 id="embedding-generation"><a href="#embedding-generation" class="anchor-link">Embedding Generation</a></h3>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>async function generateEmbedding(text) {</span></div><div class="px-4"><span>    const response = await openrouter.embeddings.create({</span></div><div class="px-4"><span>        model: process.env.EMBEDDING_MODEL,</span></div><div class="px-4"><span>        input: text</span></div><div class="px-4"><span>    });</span></div><div class="px-4"><span>    return response.data[0].embedding;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h3 id="cosine-similarity"><a href="#cosine-similarity" class="anchor-link">Cosine Similarity</a></h3>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>function cosineSimilarity(a, b) {</span></div><div class="px-4"><span>    let dotProduct = 0;</span></div><div class="px-4"><span>    let normA = 0;</span></div><div class="px-4"><span>    let normB = 0;</span></div><div class="px-4"><span>    for (let i = 0; i &lt; a.length; i++) {</span></div><div class="px-4"><span>        dotProduct += a[i] * b[i];</span></div><div class="px-4"><span>        normA += a[i] * a[i];</span></div><div class="px-4"><span>        normB += b[i] * b[i];</span></div><div class="px-4"><span>    }</span></div><div class="px-4"><span>    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="best-practices"><a href="#best-practices" class="anchor-link">Best Practices</a></h2>
<ol>
<li><strong>Filter noise</strong> - Don&#x27;t extract trivial information</li>
<li><strong>Respect privacy</strong> - Don&#x27;t store sensitive personal data</li>
<li><strong>Prune regularly</strong> - Remove low-value memories</li>
<li><strong>Test retrieval</strong> - Ensure relevant memories surface</li>
<li><strong>Balance extraction</strong> - Too many memories slow retrieval</li>
</ol>
<h2 id="performance-notes"><a href="#performance-notes" class="anchor-link">Performance Notes</a></h2>
<ul>
<li>Embedding generation: ~100-200ms per request</li>
<li>Vector search: O(n) over all user memories</li>
<li>For large memory sets (&gt;1000), consider batching</li>
<li>Embedding model costs: ~$0.00002 per 1K tokens</li>
</ul>
<h2 id="user-memory-vs-server-memory"><a href="#user-memory-vs-server-memory" class="anchor-link">User Memory vs Server Memory</a></h2>
<table><thead><tr><th>Feature</th><th>User Memory</th><th>Server Memory</th></tr></thead><tbody><tr><td>Scope</td><td>Per-user facts</td><td>All server messages</td></tr><tr><td>Source</td><td>AI-extracted facts</td><td>Raw message content</td></tr><tr><td>Storage</td><td><code>memories</code> table</td><td><code>server_messages</code> table</td></tr><tr><td>Retrieval</td><td>User-specific search</td><td>Server-wide semantic search</td></tr><tr><td>Purpose</td><td>Remember user preferences</td><td>Ambient conversation awareness</td></tr></tbody></table>
<p>Both systems complement each other - User Memory stores personal facts, while <a href="/ai/server-memory">Server Memory</a> provides conversational context.</p></div><nav class="flex items-center justify-between mt-16 pt-8 border-t border-[var(--border)]"><a class="group flex items-center gap-2 px-4 py-3 rounded-lg border border-[var(--border)] bg-[var(--bg-secondary)] hover:border-[var(--accent)] hover:shadow-soft transition-all" href="/features/chat/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left w-5 h-5 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors"><path d="m15 18-6-6 6-6"></path></svg><div class="text-left"><div class="text-xs text-[var(--text-muted)] mb-0.5">Previous</div><div class="text-sm font-medium text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors">AI Chat</div></div></a><a class="group flex items-center gap-2 px-4 py-3 rounded-lg border border-[var(--border)] bg-[var(--bg-secondary)] hover:border-[var(--accent)] hover:shadow-soft transition-all" href="/ai/personality/"><div class="text-right"><div class="text-xs text-[var(--text-muted)] mb-0.5">Next</div><div class="text-sm font-medium text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors">Dynamic Personality</div></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-5 h-5 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors"><path d="m9 18 6-6-6-6"></path></svg></a></nav></article></div></main></div></div></div><script src="/_next/static/chunks/webpack-e5714bf66625afb9.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/443896d591e4f761-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/3cf59f0fd0496c15.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[2846,[],\"\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[2060,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"ThemeProvider\"]\nb:I[4351,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"Header\"]\nc:I[9399,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"Sidebar\"]\ne:I[1060,[],\"\"]\n8:[\"slug\",\"ai/memory\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"FeUt14WxB_Uw-6zJdn3nr\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"ai\",\"memory\",\"\"],\"initialTree\":[\"\",{\"children\":[[\"slug\",\"ai/memory\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"ai\\\",\\\"memory\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"ai/memory\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\",null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3cf59f0fd0496c15.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_f367f3 __variable_a06722 font-sans\",\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-[var(--bg-primary)] transition-colors duration-200\",\"children\":[[\"$\",\"$Lb\",null,{}],[\"$\",\"div\",null,{\"className\":\"flex\",\"children\":[[\"$\",\"$Lc\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 min-w-0 lg:pl-[var(--sidebar-width)]\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]]}]]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]\n"])</script><script>self.__next_f.push([1,"10:I[6430,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"Breadcrumbs\"]\n11:I[9078,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"CopyPageButton\"]\n13:I[3308,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"PageNavigation\"]\n14:I[5321,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"TableOfContents\"]\n6:[[\"$\",\"article\",null,{\"className\":\"animate-in\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-start justify-between gap-4 mb-6\",\"children\":[[\"$\",\"$L10\",null,{}],[\"$\",\"$L11\",null,{}]]}],[\"$\",\"h1\",null,{\"children\":\"User Memory\"}],[\"$\",\"p\",null,{\"className\":\"text-lg text-[var(--text-secondary)] mb-8 -mt-2\",\"children\":\"Vector-based per-user long-term memory using text embeddings.\"}],[\"$\",\"div\",null,{\"className\":\"prose-custom\",\"children\":\"$L12\"}],[\"$\",\"$L13\",null,{}]]}],[\"$\",\"$L14\",null,{}]]\nd:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"User Memory - Beboa Docs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Vector-based per-user long-term memory using text embeddings.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,"15:I[5045,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"CodeBlock\"]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"h1\",null,{\"id\":\"user-memory-system\",\"children\":\"User Memory System\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Beboa uses vector embeddings for per-user long-term memory, enabling contextual recall of facts about individual users.\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"See Also\"}],\": For server-wide awareness of all messages, see \",[\"$\",\"a\",null,{\"href\":\"/ai/server-memory\",\"children\":\"Server-Wide Memory\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"how-it-works\",\"children\":[\"$\",\"a\",null,{\"href\":\"#how-it-works\",\"className\":\"anchor-link\",\"children\":\"How It Works\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Extraction\"}],\": AI identifies important facts from conversations\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Embedding\"}],\": Facts are converted to 1536-dimension vectors\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Storage\"}],\": Vectors stored in SQLite with metadata\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Retrieval\"}],\": Cosine similarity finds relevant memories\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Context\"}],\": Retrieved memories inform responses\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"memory-types\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memory-types\",\"className\":\"anchor-link\",\"children\":\"Memory Types\"}]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Type\"}],[\"$\",\"th\",null,{\"children\":\"Description\"}],[\"$\",\"th\",null,{\"children\":\"Example\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"fact\"}]}],[\"$\",\"td\",null,{\"children\":\"Objective information\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User works as a programmer\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"preference\"}]}],[\"$\",\"td\",null,{\"children\":\"User likes/dislikes\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User prefers Python over JavaScript\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"event\"}]}],[\"$\",\"td\",null,{\"children\":\"Something that happened\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User's birthday was last week\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"relationship\"}]}],[\"$\",\"td\",null,{\"children\":\"Social connections\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User has a sister named Sarah\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"emotional\"}]}],[\"$\",\"td\",null,{\"children\":\"Feelings/reactions\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User was sad about job loss\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"context\"}]}],[\"$\",\"td\",null,{\"children\":\"Situational info\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User is working on a game project\\\"\"}]]}]]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#configuration\",\"className\":\"anchor-link\",\"children\":\"Configuration\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"env\",\"children\":\"# Enable memory system\\nMEMORY_ENABLED=true\\n\\n# Auto-extract memories from conversations\\nMEMORY_AUTO_EXTRACT=true\\n\\n# Embedding model\\nEMBEDDING_MODEL=openai/text-embedding-3-small\\n\\n# Memory extraction model\\nEXTRACTION_MODEL=x-ai/grok-4.1-fast\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"memory-extraction\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memory-extraction\",\"className\":\"anchor-link\",\"children\":\"Memory Extraction\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When \",[\"$\",\"code\",null,{\"children\":\"MEMORY_AUTO_EXTRACT=true\"}],\", after each conversation:\"]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const extractionPrompt = `\\nAnalyze this conversation and extract important facts about the user.\\nReturn a JSON array of memories:\\n\\n[\\n  {\\n    \\\"content\\\": \\\"User is learning guitar\\\",\\n    \\\"type\\\": \\\"fact\\\",\\n    \\\"importance\\\": 0.7\\n  }\\n]\\n\\nOnly extract genuinely useful information. Skip small talk.\\n`;\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"importance-scoring\",\"children\":[\"$\",\"a\",null,{\"href\":\"#importance-scoring\",\"className\":\"anchor-link\",\"children\":\"Importance Scoring\"}]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Score\"}],[\"$\",\"th\",null,{\"children\":\"Meaning\"}],[\"$\",\"th\",null,{\"children\":\"Examples\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"0.1-0.3\"}],[\"$\",\"td\",null,{\"children\":\"Minor detail\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User said 'lol'\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"0.4-0.6\"}],[\"$\",\"td\",null,{\"children\":\"Useful context\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User is busy with exams\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"0.7-0.8\"}],[\"$\",\"td\",null,{\"children\":\"Important fact\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User has a pet dog named Max\\\"\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"0.9-1.0\"}],[\"$\",\"td\",null,{\"children\":\"Critical info\"}],[\"$\",\"td\",null,{\"children\":\"\\\"User's birthday is March 15\\\"\"}]]}]]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"memory-retrieval\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memory-retrieval\",\"className\":\"anchor-link\",\"children\":\"Memory Retrieval\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"When generating responses, relevant memories are fetched:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"// Get top 5 memories relevant to current message\\nconst memories = await searchMemories(userId, currentMessage, 5);\\n\\n// Memories are included in context:\\nconst memoryContext = memories.map(m =\u003e\\n    `- ${m.content} (remembered ${timeAgo(m.created_at)})`\\n).join('\\\\n');\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"similarity-threshold\",\"children\":[\"$\",\"a\",null,{\"href\":\"#similarity-threshold\",\"className\":\"anchor-link\",\"children\":\"Similarity Threshold\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Only memories above 0.7 cosine similarity are retrieved:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const SIMILARITY_THRESHOLD = 0.7;\\nconst relevantMemories = memories.filter(m =\u003e m.similarity \u003e= SIMILARITY_THRESHOLD);\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"database-schema\",\"children\":[\"$\",\"a\",null,{\"href\":\"#database-schema\",\"className\":\"anchor-link\",\"children\":\"Database Schema\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"sql\",\"children\":\"CREATE TABLE memories (\\n    id INTEGER PRIMARY KEY,\\n    user_id TEXT,\\n    content TEXT,\\n    memory_type TEXT,\\n    importance REAL DEFAULT 0.5,\\n    embedding BLOB,  -- 1536-dim vector as binary\\n    created_at TEXT,\\n    last_accessed TEXT,\\n    access_count INTEGER DEFAULT 0\\n);\\n\\nCREATE INDEX idx_memories_user ON memories(user_id);\\nCREATE INDEX idx_memories_type ON memories(memory_type);\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"viewing-memories\",\"children\":[\"$\",\"a\",null,{\"href\":\"#viewing-memories\",\"className\":\"anchor-link\",\"children\":\"Viewing Memories\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"via-slash-command\",\"children\":[\"$\",\"a\",null,{\"href\":\"#via-slash-command\",\"className\":\"anchor-link\",\"children\":\"Via Slash Command\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"/memories @user\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"via-jarvis-mode\",\"children\":[\"$\",\"a\",null,{\"href\":\"#via-jarvis-mode\",\"className\":\"anchor-link\",\"children\":\"Via Jarvis Mode\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"\\\"what do you remember about @user\\\"\\n\\\"search memories for cats\\\"\\n\\\"show @user's memories\\\"\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"managing-memories\",\"children\":[\"$\",\"a\",null,{\"href\":\"#managing-memories\",\"className\":\"anchor-link\",\"children\":\"Managing Memories\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"add-memory-jarvis-mode\",\"children\":[\"$\",\"a\",null,{\"href\":\"#add-memory-jarvis-mode\",\"className\":\"anchor-link\",\"children\":\"Add Memory (Jarvis Mode)\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"\\\"remember that @user likes pizza\\\"\\n\\\"note: @user is allergic to peanuts\\\"\\n\\\"add memory: @user's birthday is June 5th\\\"\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"search-memories-jarvis-mode\",\"children\":[\"$\",\"a\",null,{\"href\":\"#search-memories-jarvis-mode\",\"className\":\"anchor-link\",\"children\":\"Search Memories (Jarvis Mode)\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"\\\"search memories for birthday\\\"\\n\\\"what did @user say about work\\\"\\n\\\"find memories about games\\\"\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"delete-memory-code-only\",\"children\":[\"$\",\"a\",null,{\"href\":\"#delete-memory-code-only\",\"className\":\"anchor-link\",\"children\":\"Delete Memory (Code only)\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"import { deleteMemory } from './services/memory.js';\\nawait deleteMemory(memoryId);\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"memory-decay\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memory-decay\",\"className\":\"anchor-link\",\"children\":\"Memory Decay\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Old, unaccessed memories decay in importance:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"// Monthly decay\\nconst monthsSinceAccess = getMonthsSince(lastAccessed);\\nconst decayFactor = Math.pow(0.95, monthsSinceAccess);\\nmemory.importance *= decayFactor;\\n\\n// Remove if importance drops below 0.1\\nif (memory.importance \u003c 0.1) {\\n    await deleteMemory(memory.id);\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"memory-in-responses\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memory-in-responses\",\"className\":\"anchor-link\",\"children\":\"Memory in Responses\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Beboa naturally incorporates memories:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Without memory:\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"\\\"What do you want? I don't know anything about you.\\\"\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"With memory:\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"\\\"Oh, you're back! How's that guitar practice going? Still struggling with F chord? Hehe~\\\"\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"vector-operations\",\"children\":[\"$\",\"a\",null,{\"href\":\"#vector-operations\",\"className\":\"anchor-link\",\"children\":\"Vector Operations\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"embedding-generation\",\"children\":[\"$\",\"a\",null,{\"href\":\"#embedding-generation\",\"className\":\"anchor-link\",\"children\":\"Embedding Generation\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"async function generateEmbedding(text) {\\n    const response = await openrouter.embeddings.create({\\n        model: process.env.EMBEDDING_MODEL,\\n        input: text\\n    });\\n    return response.data[0].embedding;\\n}\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"cosine-similarity\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cosine-similarity\",\"className\":\"anchor-link\",\"children\":\"Cosine Similarity\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"function cosineSimilarity(a, b) {\\n    let dotProduct = 0;\\n    let normA = 0;\\n    let normB = 0;\\n    for (let i = 0; i \u003c a.length; i++) {\\n        dotProduct += a[i] * b[i];\\n        normA += a[i] * a[i];\\n        normB += b[i] * b[i];\\n    }\\n    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"best-practices\",\"children\":[\"$\",\"a\",null,{\"href\":\"#best-practices\",\"className\":\"anchor-link\",\"children\":\"Best Practices\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Filter noise\"}],\" - Don't extract trivial information\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Respect privacy\"}],\" - Don't store sensitive personal data\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Prune regularly\"}],\" - Remove low-value memories\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Test retrieval\"}],\" - Ensure relevant memories surface\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Balance extraction\"}],\" - Too many memories slow retrieval\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"performance-notes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#performance-notes\",\"className\":\"anchor-link\",\"children\":\"Performance Notes\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Embedding generation: ~100-200ms per request\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Vector search: O(n) over all user memories\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"For large memory sets (\u003e1000), consider batching\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Embedding model costs: ~$0.00002 per 1K tokens\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"user-memory-vs-server-memory\",\"children\":[\"$\",\"a\",null,{\"href\":\"#user-memory-vs-server-memory\",\"className\":\"anchor-link\",\"children\":\"User Memory vs Server Memory\"}]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Feature\"}],[\"$\",\"th\",null,{\"children\":\"User Memory\"}],[\"$\",\"th\",null,{\"children\":\"Server Memory\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Scope\"}],[\"$\",\"td\",null,{\"children\":\"Per-user facts\"}],[\"$\",\"td\",null,{\"children\":\"All server messages\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Source\"}],[\"$\",\"td\",null,{\"children\":\"AI-extracted facts\"}],[\"$\",\"td\",null,{\"children\":\"Raw message content\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Storage\"}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"memories\"}],\" table\"]}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"server_messages\"}],\" table\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Retrieval\"}],[\"$\",\"td\",null,{\"children\":\"User-specific search\"}],[\"$\",\"td\",null,{\"children\":\"Server-wide semantic search\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Purpose\"}],[\"$\",\"td\",null,{\"children\":\"Remember user preferences\"}],[\"$\",\"td\",null,{\"children\":\"Ambient conversation awareness\"}]]}]]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Both systems complement each other - User Memory stores personal facts, while \",[\"$\",\"a\",null,{\"href\":\"/ai/server-memory\",\"children\":\"Server Memory\"}],\" provides conversational context.\"]}]]\n"])</script></body></html>