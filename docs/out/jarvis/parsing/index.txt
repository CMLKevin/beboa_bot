3:I[4707,[],""]
5:I[6423,[],""]
6:I[2060,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"ThemeProvider"]
7:I[4351,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Header"]
8:I[9399,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","185","static/chunks/app/layout-4b75b78215e64ea2.js"],"Sidebar"]
4:["slug","jarvis/parsing","c"]
0:["FeUt14WxB_Uw-6zJdn3nr",[[["",{"children":[["slug","jarvis/parsing","c"],{"children":["__PAGE__?{\"slug\":[\"jarvis\",\"parsing\"]}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","jarvis/parsing","c"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3cf59f0fd0496c15.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_f367f3 __variable_a06722 font-sans","children":["$","$L6",null,{"children":["$","div",null,{"className":"min-h-screen bg-[var(--bg-primary)] transition-colors duration-200","children":[["$","$L7",null,{}],["$","div",null,{"className":"flex","children":[["$","$L8",null,{}],["$","main",null,{"className":"flex-1 min-w-0 lg:pl-[var(--sidebar-width)]","children":["$","div",null,{"className":"max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]}]]}]]}]}]}]}]],null],null],["$L9",null]]]]
a:I[6430,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"Breadcrumbs"]
b:I[9078,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CopyPageButton"]
d:I[3308,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"PageNavigation"]
e:I[5321,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"TableOfContents"]
2:[["$","article",null,{"className":"animate-in","children":[["$","div",null,{"className":"flex items-start justify-between gap-4 mb-6","children":[["$","$La",null,{}],["$","$Lb",null,{}]]}],["$","h1",null,{"children":"Parsing"}],"$undefined",["$","div",null,{"className":"prose-custom","children":"$Lc"}],["$","$Ld",null,{}]]}],["$","$Le",null,{}]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Parsing - Beboa Docs"}],["$","link","3",{"rel":"icon","href":"/favicon.ico"}],["$","meta","4",{"name":"next-size-adjust"}]]
1:null
f:I[5045,["972","static/chunks/972-68a674eeca97bbbb.js","646","static/chunks/646-1e67c3e800eb58dd.js","877","static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js"],"CodeBlock"]
c:[["$","h1",null,{"id":"intent-parsing-deep-dive","children":"Intent Parsing Deep Dive"}],"\n",["$","p",null,{"children":["How Jarvis Mode interprets natural language commands using ",["$","strong",null,{"children":"LLM-first parsing"}],"."]}],"\n",["$","h2",null,{"id":"the-llm-first-pipeline","children":["$","a",null,{"href":"#the-llm-first-pipeline","className":"anchor-link","children":"The LLM-First Pipeline"}]}],"\n",["$","p",null,{"children":["Jarvis Mode now uses an LLM as the ",["$","strong",null,{"children":"primary"}]," intent parser, with pattern matching and keyword analysis as fallbacks."]}],"\n",["$","$Lf",null,{"language":"$undefined","children":"User Input\n    │\n    ▼\n┌─────────────────────────────────┐\n│ Stage 1: Pending Confirmations  │ ─── Handle \"yes\"/\"no\" for dangerous ops\n└──────────────┬──────────────────┘\n               │\n               ▼\n┌─────────────────────────────────┐\n│ Stage 2: LLM Intent Parser      │ ─── PRIMARY: AI understands intent\n│ (x-ai/grok-4.1-fast)            │     confidence > 0.6? Execute!\n└──────────────┬──────────────────┘\n               │ No match or low confidence\n               ▼\n┌─────────────────────────────────┐\n│ Stage 3: Pattern Matching       │ ─── FALLBACK: Regex patterns\n└──────────────┬──────────────────┘\n               │ No match\n               ▼\n┌─────────────────────────────────┐\n│ Stage 4: Intent Keywords        │ ─── FALLBACK: Keyword scoring\n└──────────────┬──────────────────┘\n               │\n               ▼\n┌─────────────────────────────────┐\n│ Stage 5: Context Substitution   │ ─── \"them\" → last mentioned user\n└─────────────────────────────────┘"}],"\n",["$","h2",null,{"id":"stage-2-llm-intent-parser-primary","children":["$","a",null,{"href":"#stage-2-llm-intent-parser-primary","className":"anchor-link","children":"Stage 2: LLM Intent Parser (Primary)"}]}],"\n",["$","p",null,{"children":"The LLM evaluator understands natural language and extracts structured command data."}],"\n",["$","h3",null,{"id":"llm-system-prompt","children":["$","a",null,{"href":"#llm-system-prompt","className":"anchor-link","children":"LLM System Prompt"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"const JARVIS_SYSTEM_PROMPT = `You are a natural language command parser for Beboa Discord bot's admin mode.\nParse user messages to identify admin commands and extract parameters.\n\nAvailable commands:\n- give_bebits: Award currency (params: targetUserId, amount)\n- remove_bebits: Deduct currency (params: targetUserId, amount)\n- set_bebits: Set exact balance (params: targetUserId, amount)\n- transfer_bebits: Move between users (params: fromUserId, toUserId, amount)\n- reset_streak: Clear check-in streak (params: targetUserId)\n- user_info: Get user statistics (params: targetUserId)\n- compare_users: Compare two users (params: userId1, userId2)\n- server_stats: Server-wide statistics (no params)\n- set_mood: Change bot mood (params: moodName)\n- bonk, shame, praise, roast, simp_check, fortune, compatibility...\n...\n\nParse casual language:\n- \"give @user 100 bebits\" → give_bebits\n- \"yeet 50 coins to @user\" → give_bebits\n- \"check @user's stats\" → user_info\n- \"roast that fool @user\" → roast\n`;"}],"\n",["$","h3",null,{"id":"llm-output-format","children":["$","a",null,{"href":"#llm-output-format","className":"anchor-link","children":"LLM Output Format"}]}],"\n",["$","$Lf",null,{"language":"javascript","children":"// Example LLM parsing result\n{\n  isCommand: true,                    // Is this an admin command?\n  command: \"give_bebits\",             // Detected command name\n  confidence: 0.92,                   // How confident (0.0-1.0)\n  params: {\n    targetUserId: \"123456789\",        // Extracted user ID\n    amount: 100                       // Extracted amount\n  },\n  requiresConfirmation: false,        // Dangerous operation?\n  clarificationNeeded: null,          // Question to ask if unclear\n  reasoning: \"User wants to give 100 bebits to the mentioned user\"\n}"}],"\n",["$","h3",null,{"id":"confidence-thresholds","children":["$","a",null,{"href":"#confidence-thresholds","className":"anchor-link","children":"Confidence Thresholds"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Confidence"}],["$","th",null,{"children":"Action"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"≥ 0.6"}],["$","td",null,{"children":"Execute the command"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"< 0.6 with clarification"}],["$","td",null,{"children":"Ask the clarification question"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"< 0.6 without clarification"}],["$","td",null,{"children":"Fall through to pattern matching"}]]}]]}]]}],"\n",["$","h3",null,{"id":"llm-examples","children":["$","a",null,{"href":"#llm-examples","className":"anchor-link","children":"LLM Examples"}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"Input:"}]," ",["$","code",null,{"children":"\"yo give @CoolUser like a hundred coins\""}]]}],"\n",["$","$Lf",null,{"language":"javascript","children":"{\n  isCommand: true,\n  command: \"give_bebits\",\n  confidence: 0.88,\n  params: { targetUserId: \"123456789\", amount: 100 },\n  reasoning: \"'yo give' indicates giving, 'like a hundred' = 100\"\n}"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"Input:"}]," ",["$","code",null,{"children":"\"who's the bigger simp, @user1 or @user2\""}]]}],"\n",["$","$Lf",null,{"language":"javascript","children":"{\n  isCommand: true,\n  command: \"compare_users\",\n  confidence: 0.85,\n  params: { userId1: \"111\", userId2: \"222\" },\n  reasoning: \"Comparing two users for simp status = compare_users\"\n}"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"Input:"}]," ",["$","code",null,{"children":"\"make them rich\""}]]}],"\n",["$","$Lf",null,{"language":"javascript","children":"{\n  isCommand: true,\n  command: \"give_bebits\",\n  confidence: 0.45,  // Low - who is \"them\"?\n  clarificationNeeded: \"Who do you want to make rich?\",\n  reasoning: \"'make rich' implies giving bebits but no user specified\"\n}"}],"\n",["$","h2",null,{"id":"confirmation-system","children":["$","a",null,{"href":"#confirmation-system","className":"anchor-link","children":"Confirmation System"}]}],"\n",["$","p",null,{"children":["For dangerous operations, the LLM can flag ",["$","code",null,{"children":"requiresConfirmation: true"}],":"]}],"\n",["$","$Lf",null,{"language":"javascript","children":"// remove_bebits, reset_streak, etc.\nif (llmIntent.requiresConfirmation) {\n  pendingConfirmations.set(userId, {\n    command: llmIntent.command,\n    params: llmIntent.params,\n    expires: Date.now() + 60000,  // 60 second timeout\n    execute: async () => { /* ... */ }\n  });\n\n  return \"⚠️ This is a destructive operation. Are you sure? (Reply 'yes' to confirm)\";\n}"}],"\n",["$","h2",null,{"id":"stage-3-pattern-matching-fallback","children":["$","a",null,{"href":"#stage-3-pattern-matching-fallback","className":"anchor-link","children":"Stage 3: Pattern Matching (Fallback)"}]}],"\n",["$","p",null,{"children":"When LLM is unavailable or returns low confidence, regex patterns are tried:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"const patterns = {\n  give_bebits: [\n    /(?:give|award|grant)\\s+(?:<@!?)?(\\d+)(?:>)?\\s+(\\d+)\\s*(?:bebits?|points?)?/i,\n    /(?:<@!?)?(\\d+)(?:>)?\\s+(?:gets?|receives?)\\s+(\\d+)\\s*(?:bebits?|points?)?/i\n  ],\n  remove_bebits: [\n    /(?:remove|take|yoink)\\s+(\\d+)\\s*(?:bebits?)?\\s*from\\s+(?:<@!?)?(\\d+)(?:>)?/i\n  ],\n  bonk: [\n    /bonk\\s+(?:<@!?)?(\\d+)(?:>)?/i,\n    /(?:send|put)\\s+(?:<@!?)?(\\d+)(?:>)?\\s+(?:to|in)\\s+(?:horny\\s+)?jail/i\n  ]\n  // ... more patterns\n};"}],"\n",["$","h2",null,{"id":"stage-4-intent-keywords-fallback","children":["$","a",null,{"href":"#stage-4-intent-keywords-fallback","className":"anchor-link","children":"Stage 4: Intent Keywords (Fallback)"}]}],"\n",["$","p",null,{"children":"Keyword scoring as a last resort:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"const intentKeywords = {\n  give_bebits: ['give', 'award', 'grant', 'add', 'bless', 'bebits', 'points'],\n  remove_bebits: ['remove', 'take', 'deduct', 'yoink', 'steal', 'minus'],\n  user_info: ['info', 'check', 'who', 'about', 'details', 'lookup'],\n  roast: ['roast', 'burn', 'drag', 'destroy', 'murder'],\n  // ... more keywords\n};\n\nfunction analyzeIntent(message) {\n  const scores = {};\n  for (const [command, keywords] of Object.entries(intentKeywords)) {\n    let score = 0;\n    for (const keyword of keywords) {\n      if (message.toLowerCase().includes(keyword)) {\n        score += keyword.length;  // Longer = more specific\n      }\n    }\n    if (score > 0) scores[command] = score;\n  }\n  return /* best match with confidence */;\n}"}],"\n",["$","h2",null,{"id":"stage-5-context-substitution","children":["$","a",null,{"href":"#stage-5-context-substitution","className":"anchor-link","children":"Stage 5: Context Substitution"}]}],"\n",["$","p",null,{"children":"Uses conversation history for pronouns:"}],"\n",["$","$Lf",null,{"language":"javascript","children":"const conversationContext = {\n  lastMentionedUser: null,\n  lastCommand: null\n};\n\n// \"give them 50 more\" → resolves \"them\" from context\nif (message.match(/\\b(them|that person)\\b/i) && !extractUserId(message)) {\n  const enhanced = message.replace(/them/gi, `<@${context.lastMentionedUser}>`);\n  return parseAndExecuteAdminCommand(enhanced, context);\n}"}],"\n",["$","h2",null,{"id":"debugging","children":["$","a",null,{"href":"#debugging","className":"anchor-link","children":"Debugging"}]}],"\n",["$","p",null,{"children":"Enable logging to see which stage handled the command:"}],"\n",["$","$Lf",null,{"language":"$undefined","children":"[JARVIS] LLM parsed: give_bebits (confidence: 0.92)"}],"\n",["$","p",null,{"children":"Or for fallbacks:"}],"\n",["$","$Lf",null,{"language":"$undefined","children":"[JARVIS] LLM not available or low confidence, trying pattern matching\n[JARVIS] Pattern matched: give_bebits"}],"\n",["$","h2",null,{"id":"configuration","children":["$","a",null,{"href":"#configuration","className":"anchor-link","children":"Configuration"}]}],"\n",["$","$Lf",null,{"language":"env","children":"# Enable LLM-powered parsing (primary)\nLLM_EVALUATOR_ENABLED=true\n\n# Model for intent parsing\nLLM_EVALUATOR_MODEL=x-ai/grok-4.1-fast\n\n# Rate limit for evaluator\nLLM_EVALUATOR_RATE_LIMIT=30\n\n# Cache parsed intents\nLLM_EVALUATOR_CACHE_TTL=60000"}],"\n",["$","h2",null,{"id":"benefits-of-llm-first","children":["$","a",null,{"href":"#benefits-of-llm-first","className":"anchor-link","children":"Benefits of LLM-First"}]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Before (Regex-First)"}],["$","th",null,{"children":"After (LLM-First)"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"1200+ lines of regex patterns"}],["$","td",null,{"children":"LLM understands natural language"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Misses casual phrasing"}],["$","td",null,{"children":"\"yeet coins at them\" works"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Rigid parameter positions"}],["$","td",null,{"children":"Flexible word order"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"No typo tolerance"}],["$","td",null,{"children":"Handles typos and variations"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Context-blind"}],["$","td",null,{"children":"Understands conversation flow"}]]}]]}]]}],"\n",["$","h2",null,{"id":"adding-new-commands","children":["$","a",null,{"href":"#adding-new-commands","className":"anchor-link","children":"Adding New Commands"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["Add to the LLM system prompt in ",["$","code",null,{"children":"llmEvaluator.js"}]]}],"\n",["$","li",null,{"children":["Define the command in ",["$","code",null,{"children":"adminCommands.js"}]]}],"\n",["$","li",null,{"children":"The LLM will automatically understand natural variations"}],"\n"]}],"\n",["$","$Lf",null,{"language":"javascript","children":"// No regex needed! Just add to prompt:\n\"- new_command: Description (params: param1, param2)\"\n\n// And the execute handler:\n{\n  name: 'new_command',\n  execute: async (match, context) => { /* ... */ }\n}"}],"\n",["$","h2",null,{"id":"best-practices","children":["$","a",null,{"href":"#best-practices","className":"anchor-link","children":"Best Practices"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Trust the LLM"}]," - It handles edge cases better than regex"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Keep fallbacks"}]," - Pattern matching still works when LLM is rate limited"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Use confirmations"}]," - Dangerous operations should require explicit \"yes\""]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Check logs"}]," - Verify which parsing stage is being used"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Test natural language"}]," - \"yo give that dude 50\" should just work"]}],"\n"]}]]
