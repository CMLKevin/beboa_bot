<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/443896d591e4f761-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/3cf59f0fd0496c15.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-e5714bf66625afb9.js"/><script src="/_next/static/chunks/fd9d1056-e1b8fc02af805f43.js" async=""></script><script src="/_next/static/chunks/117-bf803eaaef7a29e0.js" async=""></script><script src="/_next/static/chunks/main-app-b6379442ececfbb8.js" async=""></script><script src="/_next/static/chunks/972-68a674eeca97bbbb.js" async=""></script><script src="/_next/static/chunks/646-1e67c3e800eb58dd.js" async=""></script><script src="/_next/static/chunks/app/layout-4b75b78215e64ea2.js" async=""></script><script src="/_next/static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js" async=""></script><title>Parsing - Beboa Docs</title><link rel="icon" href="/favicon.ico"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_f367f3 __variable_a06722 font-sans"><div style="visibility:hidden"><div class="min-h-screen bg-[var(--bg-primary)] transition-colors duration-200"><header class="sticky top-0 z-40 w-full h-[var(--header-height)] bg-[var(--bg-secondary)] border-b border-[var(--border)]"><div class="flex items-center justify-between h-full px-4 lg:px-6"><div class="flex items-center gap-6"><button class="lg:hidden p-2 -ml-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-5 h-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><a class="flex items-center gap-2 text-lg font-semibold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors" href="/"><span class="text-xl">ğŸ</span><span class="hidden sm:inline">Beboa</span><span class="hidden sm:inline text-xs font-normal text-[var(--text-muted)] ml-1">Docs</span></a><nav class="hidden lg:flex items-center gap-1"><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/">User Guide</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/">AI Systems</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--accent)] bg-[var(--accent-light)]" href="/jarvis/">Jarvis Mode</a><a class="px-3 py-2 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/structure/">Reference</a></nav></div><div class="flex items-center gap-3"><div class="hidden sm:block"><button class="flex items-center gap-2 px-3 py-2 text-sm text-[var(--text-muted)] bg-[var(--bg-tertiary)] hover:bg-[var(--border)] rounded-lg border border-[var(--border)] transition-colors w-full max-w-[240px]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search w-4 h-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><span class="flex-1 text-left">Search docs...</span><kbd class="hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-xs font-medium text-[var(--text-muted)] bg-[var(--bg-secondary)] rounded border border-[var(--border)]"><span class="text-xs">âŒ˜</span>K</kbd></button></div><button class="sm:hidden p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Search"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button><a href="https://github.com/CMLKevin/beboa_evo" target="_blank" rel="noopener noreferrer" class="hidden sm:flex p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github w-5 h-5"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><button class="p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Switch to dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon w-5 h-5"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></div></header><aside class="fixed inset-y-0 left-0 z-50 w-72 bg-[var(--bg-secondary)] border-r border-[var(--border)] transform transition-transform duration-300 ease-in-out lg:hidden -translate-x-full"><div class="flex items-center justify-between h-[var(--header-height)] px-4 border-b border-[var(--border)]"><a class="flex items-center gap-2 text-lg font-semibold text-[var(--text-primary)]" href="/"><span class="text-xl">ğŸ</span><span>Beboa</span></a><button class="p-2 -mr-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors" aria-label="Close menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x w-5 h-5"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button></div><div class="p-4 border-b border-[var(--border)]"><div class="flex flex-wrap gap-2"><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/">User Guide</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/ai/">AI Systems</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--accent)] bg-[var(--accent-light)]" href="/jarvis/">Jarvis Mode</a><a class="px-3 py-1.5 text-sm font-medium rounded-md transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--bg-tertiary)]" href="/architecture/structure/">Reference</a></div></div><nav class="overflow-y-auto h-[calc(100%-128px)] py-4 px-4"><ul class="space-y-1"><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Getting Started</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/">Home</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/installation/">Installation</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/configuration/">Configuration</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/getting-started/quickstart/">Quick Start</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Features</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/checkins/">Daily Check-ins</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/bebits/">Bebits &amp; Rewards</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/features/chat/">AI Chat</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">AI Systems</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/personality/">Dynamic Personality</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/moods/">Mood System</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/relationships/">Relationships</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/memory/">Semantic Memory</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/llm-evaluator/">LLM Evaluator</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/ai/tools/">Tool Calls</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Jarvis Mode 2.0</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--accent)] bg-[var(--accent-light)] font-medium" href="/jarvis/">Overview</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/commands/">Commands Reference</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--accent)] bg-[var(--accent-light)] font-medium" href="/jarvis/parsing/">Intent Parsing</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/fun/">Fun Commands</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Commands</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/commands/user/">User Commands</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/commands/admin/">Admin Commands</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Architecture</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/structure/">Project Structure</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/database/">Database Schema</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/services/">Services</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/architecture/flow/">Message Flow</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Developer Guide</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/commands/">Extending Commands</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/tools/">Custom Tools</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/migrations/">Database Migrations</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/dev/api/">API Reference</a></li></ul></li><li class="mb-4"><div class="px-3 py-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Deployment</div><ul class="mt-1 space-y-1"><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/railway/">Railway</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/vps/">VPS Setup</a></li><li><a class="block px-3 py-2 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/deployment/docker/">Docker</a></li></ul></li></ul></nav></aside><div class="flex"><aside class="hidden lg:block fixed top-[var(--header-height)] left-0 bottom-0 w-[var(--sidebar-width)] border-r border-[var(--border)] bg-[var(--bg-secondary)] overflow-y-auto"><nav class="py-6 px-4"><ul class="space-y-6"><li><div class="px-3 mb-2 text-xs font-semibold uppercase tracking-wider text-[var(--text-muted)]">Jarvis Mode 2.0</div><ul class="space-y-0.5"><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/">Overview</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/commands/">Commands Reference</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/parsing/">Intent Parsing</a></li><li><a class="block px-3 py-1.5 rounded-md text-sm transition-colors text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]" href="/jarvis/fun/">Fun Commands</a></li></ul></li></ul></nav></aside><main class="flex-1 min-w-0 lg:pl-[var(--sidebar-width)]"><div class="max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12"><article class="animate-in"><div class="flex items-start justify-between gap-4 mb-6"><nav aria-label="Breadcrumb" class="flex items-center gap-1.5 text-sm mb-4"><div class="flex items-center gap-1.5"><a class="text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors" href="/jarvis/">Jarvis Mode 2.0</a></div></nav><button class="flex items-center gap-1.5 px-3 py-1.5 text-sm text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)] rounded-md transition-colors border border-transparent hover:border-[var(--border)]" title="Copy page content"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy page</span></button></div><h1>Parsing</h1><div class="prose-custom"><h1 id="intent-parsing-deep-dive">Intent Parsing Deep Dive</h1>
<p>How Jarvis Mode interprets natural language commands using <strong>LLM-first parsing</strong>.</p>
<h2 id="the-llm-first-pipeline"><a href="#the-llm-first-pipeline" class="anchor-link">The LLM-First Pipeline</a></h2>
<p>Jarvis Mode now uses an LLM as the <strong>primary</strong> intent parser, with pattern matching and keyword analysis as fallbacks.</p>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>User Input</span></div><div class="px-4"><span>    â”‚</span></div><div class="px-4"><span>    â–¼</span></div><div class="px-4"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="px-4"><span>â”‚ Stage 1: Pending Confirmations  â”‚ â”€â”€â”€ Handle &quot;yes&quot;/&quot;no&quot; for dangerous ops</span></div><div class="px-4"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="px-4"><span>               â”‚</span></div><div class="px-4"><span>               â–¼</span></div><div class="px-4"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="px-4"><span>â”‚ Stage 2: LLM Intent Parser      â”‚ â”€â”€â”€ PRIMARY: AI understands intent</span></div><div class="px-4"><span>â”‚ (x-ai/grok-4.1-fast)            â”‚     confidence &gt; 0.6? Execute!</span></div><div class="px-4"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="px-4"><span>               â”‚ No match or low confidence</span></div><div class="px-4"><span>               â–¼</span></div><div class="px-4"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="px-4"><span>â”‚ Stage 3: Pattern Matching       â”‚ â”€â”€â”€ FALLBACK: Regex patterns</span></div><div class="px-4"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="px-4"><span>               â”‚ No match</span></div><div class="px-4"><span>               â–¼</span></div><div class="px-4"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="px-4"><span>â”‚ Stage 4: Intent Keywords        â”‚ â”€â”€â”€ FALLBACK: Keyword scoring</span></div><div class="px-4"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="px-4"><span>               â”‚</span></div><div class="px-4"><span>               â–¼</span></div><div class="px-4"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="px-4"><span>â”‚ Stage 5: Context Substitution   â”‚ â”€â”€â”€ &quot;them&quot; â†’ last mentioned user</span></div><div class="px-4"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="stage-2-llm-intent-parser-primary"><a href="#stage-2-llm-intent-parser-primary" class="anchor-link">Stage 2: LLM Intent Parser (Primary)</a></h2>
<p>The LLM evaluator understands natural language and extracts structured command data.</p>
<h3 id="llm-system-prompt"><a href="#llm-system-prompt" class="anchor-link">LLM System Prompt</a></h3>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const JARVIS_SYSTEM_PROMPT = `You are a natural language command parser for Beboa Discord bot&#x27;s admin mode.</span></div><div class="px-4"><span>Parse user messages to identify admin commands and extract parameters.</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>Available commands:</span></div><div class="px-4"><span>- give_bebits: Award currency (params: targetUserId, amount)</span></div><div class="px-4"><span>- remove_bebits: Deduct currency (params: targetUserId, amount)</span></div><div class="px-4"><span>- set_bebits: Set exact balance (params: targetUserId, amount)</span></div><div class="px-4"><span>- transfer_bebits: Move between users (params: fromUserId, toUserId, amount)</span></div><div class="px-4"><span>- reset_streak: Clear check-in streak (params: targetUserId)</span></div><div class="px-4"><span>- user_info: Get user statistics (params: targetUserId)</span></div><div class="px-4"><span>- compare_users: Compare two users (params: userId1, userId2)</span></div><div class="px-4"><span>- server_stats: Server-wide statistics (no params)</span></div><div class="px-4"><span>- set_mood: Change bot mood (params: moodName)</span></div><div class="px-4"><span>- bonk, shame, praise, roast, simp_check, fortune, compatibility...</span></div><div class="px-4"><span>...</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>Parse casual language:</span></div><div class="px-4"><span>- &quot;give @user 100 bebits&quot; â†’ give_bebits</span></div><div class="px-4"><span>- &quot;yeet 50 coins to @user&quot; â†’ give_bebits</span></div><div class="px-4"><span>- &quot;check @user&#x27;s stats&quot; â†’ user_info</span></div><div class="px-4"><span>- &quot;roast that fool @user&quot; â†’ roast</span></div><div class="px-4"><span>`;</span></div></code></pre></div>
<h3 id="llm-output-format"><a href="#llm-output-format" class="anchor-link">LLM Output Format</a></h3>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>// Example LLM parsing result</span></div><div class="px-4"><span>{</span></div><div class="px-4"><span>  isCommand: true,                    // Is this an admin command?</span></div><div class="px-4"><span>  command: &quot;give_bebits&quot;,             // Detected command name</span></div><div class="px-4"><span>  confidence: 0.92,                   // How confident (0.0-1.0)</span></div><div class="px-4"><span>  params: {</span></div><div class="px-4"><span>    targetUserId: &quot;123456789&quot;,        // Extracted user ID</span></div><div class="px-4"><span>    amount: 100                       // Extracted amount</span></div><div class="px-4"><span>  },</span></div><div class="px-4"><span>  requiresConfirmation: false,        // Dangerous operation?</span></div><div class="px-4"><span>  clarificationNeeded: null,          // Question to ask if unclear</span></div><div class="px-4"><span>  reasoning: &quot;User wants to give 100 bebits to the mentioned user&quot;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h3 id="confidence-thresholds"><a href="#confidence-thresholds" class="anchor-link">Confidence Thresholds</a></h3>
<table><thead><tr><th>Confidence</th><th>Action</th></tr></thead><tbody><tr><td>â‰¥ 0.6</td><td>Execute the command</td></tr><tr><td>&lt; 0.6 with clarification</td><td>Ask the clarification question</td></tr><tr><td>&lt; 0.6 without clarification</td><td>Fall through to pattern matching</td></tr></tbody></table>
<h3 id="llm-examples"><a href="#llm-examples" class="anchor-link">LLM Examples</a></h3>
<p><strong>Input:</strong> <code>&quot;yo give @CoolUser like a hundred coins&quot;</code></p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>{</span></div><div class="px-4"><span>  isCommand: true,</span></div><div class="px-4"><span>  command: &quot;give_bebits&quot;,</span></div><div class="px-4"><span>  confidence: 0.88,</span></div><div class="px-4"><span>  params: { targetUserId: &quot;123456789&quot;, amount: 100 },</span></div><div class="px-4"><span>  reasoning: &quot;&#x27;yo give&#x27; indicates giving, &#x27;like a hundred&#x27; = 100&quot;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<p><strong>Input:</strong> <code>&quot;who&#x27;s the bigger simp, @user1 or @user2&quot;</code></p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>{</span></div><div class="px-4"><span>  isCommand: true,</span></div><div class="px-4"><span>  command: &quot;compare_users&quot;,</span></div><div class="px-4"><span>  confidence: 0.85,</span></div><div class="px-4"><span>  params: { userId1: &quot;111&quot;, userId2: &quot;222&quot; },</span></div><div class="px-4"><span>  reasoning: &quot;Comparing two users for simp status = compare_users&quot;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<p><strong>Input:</strong> <code>&quot;make them rich&quot;</code></p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>{</span></div><div class="px-4"><span>  isCommand: true,</span></div><div class="px-4"><span>  command: &quot;give_bebits&quot;,</span></div><div class="px-4"><span>  confidence: 0.45,  // Low - who is &quot;them&quot;?</span></div><div class="px-4"><span>  clarificationNeeded: &quot;Who do you want to make rich?&quot;,</span></div><div class="px-4"><span>  reasoning: &quot;&#x27;make rich&#x27; implies giving bebits but no user specified&quot;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="confirmation-system"><a href="#confirmation-system" class="anchor-link">Confirmation System</a></h2>
<p>For dangerous operations, the LLM can flag <code>requiresConfirmation: true</code>:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>// remove_bebits, reset_streak, etc.</span></div><div class="px-4"><span>if (llmIntent.requiresConfirmation) {</span></div><div class="px-4"><span>  pendingConfirmations.set(userId, {</span></div><div class="px-4"><span>    command: llmIntent.command,</span></div><div class="px-4"><span>    params: llmIntent.params,</span></div><div class="px-4"><span>    expires: Date.now() + 60000,  // 60 second timeout</span></div><div class="px-4"><span>    execute: async () =&gt; { /* ... */ }</span></div><div class="px-4"><span>  });</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>  return &quot;âš ï¸ This is a destructive operation. Are you sure? (Reply &#x27;yes&#x27; to confirm)&quot;;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="stage-3-pattern-matching-fallback"><a href="#stage-3-pattern-matching-fallback" class="anchor-link">Stage 3: Pattern Matching (Fallback)</a></h2>
<p>When LLM is unavailable or returns low confidence, regex patterns are tried:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const patterns = {</span></div><div class="px-4"><span>  give_bebits: [</span></div><div class="px-4"><span>    /(?:give|award|grant)\s+(?:&lt;@!?)?(\d+)(?:&gt;)?\s+(\d+)\s*(?:bebits?|points?)?/i,</span></div><div class="px-4"><span>    /(?:&lt;@!?)?(\d+)(?:&gt;)?\s+(?:gets?|receives?)\s+(\d+)\s*(?:bebits?|points?)?/i</span></div><div class="px-4"><span>  ],</span></div><div class="px-4"><span>  remove_bebits: [</span></div><div class="px-4"><span>    /(?:remove|take|yoink)\s+(\d+)\s*(?:bebits?)?\s*from\s+(?:&lt;@!?)?(\d+)(?:&gt;)?/i</span></div><div class="px-4"><span>  ],</span></div><div class="px-4"><span>  bonk: [</span></div><div class="px-4"><span>    /bonk\s+(?:&lt;@!?)?(\d+)(?:&gt;)?/i,</span></div><div class="px-4"><span>    /(?:send|put)\s+(?:&lt;@!?)?(\d+)(?:&gt;)?\s+(?:to|in)\s+(?:horny\s+)?jail/i</span></div><div class="px-4"><span>  ]</span></div><div class="px-4"><span>  // ... more patterns</span></div><div class="px-4"><span>};</span></div></code></pre></div>
<h2 id="stage-4-intent-keywords-fallback"><a href="#stage-4-intent-keywords-fallback" class="anchor-link">Stage 4: Intent Keywords (Fallback)</a></h2>
<p>Keyword scoring as a last resort:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const intentKeywords = {</span></div><div class="px-4"><span>  give_bebits: [&#x27;give&#x27;, &#x27;award&#x27;, &#x27;grant&#x27;, &#x27;add&#x27;, &#x27;bless&#x27;, &#x27;bebits&#x27;, &#x27;points&#x27;],</span></div><div class="px-4"><span>  remove_bebits: [&#x27;remove&#x27;, &#x27;take&#x27;, &#x27;deduct&#x27;, &#x27;yoink&#x27;, &#x27;steal&#x27;, &#x27;minus&#x27;],</span></div><div class="px-4"><span>  user_info: [&#x27;info&#x27;, &#x27;check&#x27;, &#x27;who&#x27;, &#x27;about&#x27;, &#x27;details&#x27;, &#x27;lookup&#x27;],</span></div><div class="px-4"><span>  roast: [&#x27;roast&#x27;, &#x27;burn&#x27;, &#x27;drag&#x27;, &#x27;destroy&#x27;, &#x27;murder&#x27;],</span></div><div class="px-4"><span>  // ... more keywords</span></div><div class="px-4"><span>};</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>function analyzeIntent(message) {</span></div><div class="px-4"><span>  const scores = {};</span></div><div class="px-4"><span>  for (const [command, keywords] of Object.entries(intentKeywords)) {</span></div><div class="px-4"><span>    let score = 0;</span></div><div class="px-4"><span>    for (const keyword of keywords) {</span></div><div class="px-4"><span>      if (message.toLowerCase().includes(keyword)) {</span></div><div class="px-4"><span>        score += keyword.length;  // Longer = more specific</span></div><div class="px-4"><span>      }</span></div><div class="px-4"><span>    }</span></div><div class="px-4"><span>    if (score &gt; 0) scores[command] = score;</span></div><div class="px-4"><span>  }</span></div><div class="px-4"><span>  return /* best match with confidence */;</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="stage-5-context-substitution"><a href="#stage-5-context-substitution" class="anchor-link">Stage 5: Context Substitution</a></h2>
<p>Uses conversation history for pronouns:</p>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>const conversationContext = {</span></div><div class="px-4"><span>  lastMentionedUser: null,</span></div><div class="px-4"><span>  lastCommand: null</span></div><div class="px-4"><span>};</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>// &quot;give them 50 more&quot; â†’ resolves &quot;them&quot; from context</span></div><div class="px-4"><span>if (message.match(/\b(them|that person)\b/i) &amp;&amp; !extractUserId(message)) {</span></div><div class="px-4"><span>  const enhanced = message.replace(/them/gi, `&lt;@${context.lastMentionedUser}&gt;`);</span></div><div class="px-4"><span>  return parseAndExecuteAdminCommand(enhanced, context);</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="debugging"><a href="#debugging" class="anchor-link">Debugging</a></h2>
<p>Enable logging to see which stage handled the command:</p>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>[JARVIS] LLM parsed: give_bebits (confidence: 0.92)</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>Or for fallbacks:</p>
<div class="relative group my-6"><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-lg p-4"><code class="font-mono block"><div class="px-4"><span>[JARVIS] LLM not available or low confidence, trying pattern matching</span></div><div class="px-4"><span>[JARVIS] Pattern matched: give_bebits</span></div></code></pre><button class="absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all opacity-0 group-hover:opacity-100 bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="configuration"><a href="#configuration" class="anchor-link">Configuration</a></h2>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">env</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span># Enable LLM-powered parsing (primary)</span></div><div class="px-4"><span>LLM_EVALUATOR_ENABLED=true</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Model for intent parsing</span></div><div class="px-4"><span>LLM_EVALUATOR_MODEL=x-ai/grok-4.1-fast</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Rate limit for evaluator</span></div><div class="px-4"><span>LLM_EVALUATOR_RATE_LIMIT=30</span></div><div class="px-4"><span> </span></div><div class="px-4"><span># Cache parsed intents</span></div><div class="px-4"><span>LLM_EVALUATOR_CACHE_TTL=60000</span></div></code></pre></div>
<h2 id="benefits-of-llm-first"><a href="#benefits-of-llm-first" class="anchor-link">Benefits of LLM-First</a></h2>
<table><thead><tr><th>Before (Regex-First)</th><th>After (LLM-First)</th></tr></thead><tbody><tr><td>1200+ lines of regex patterns</td><td>LLM understands natural language</td></tr><tr><td>Misses casual phrasing</td><td>&quot;yeet coins at them&quot; works</td></tr><tr><td>Rigid parameter positions</td><td>Flexible word order</td></tr><tr><td>No typo tolerance</td><td>Handles typos and variations</td></tr><tr><td>Context-blind</td><td>Understands conversation flow</td></tr></tbody></table>
<h2 id="adding-new-commands"><a href="#adding-new-commands" class="anchor-link">Adding New Commands</a></h2>
<ol>
<li>Add to the LLM system prompt in <code>llmEvaluator.js</code></li>
<li>Define the command in <code>adminCommands.js</code></li>
<li>The LLM will automatically understand natural variations</li>
</ol>
<div class="relative group my-6"><div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] dark:bg-[#1a1a1a] border-b border-[#3d3d3d] rounded-t-lg"><span class="text-xs font-medium text-[#9a9a9a]">javascript</span><button class="flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded transition-all bg-[#3d3d3d] text-[#9a9a9a] hover:bg-[#4d4d4d] hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><pre class="overflow-x-auto text-sm bg-[var(--code-bg)] text-[var(--code-text)] rounded-b-lg rounded-t-none p-4"><code class="font-mono block"><div class="px-4"><span>// No regex needed! Just add to prompt:</span></div><div class="px-4"><span>&quot;- new_command: Description (params: param1, param2)&quot;</span></div><div class="px-4"><span> </span></div><div class="px-4"><span>// And the execute handler:</span></div><div class="px-4"><span>{</span></div><div class="px-4"><span>  name: &#x27;new_command&#x27;,</span></div><div class="px-4"><span>  execute: async (match, context) =&gt; { /* ... */ }</span></div><div class="px-4"><span>}</span></div></code></pre></div>
<h2 id="best-practices"><a href="#best-practices" class="anchor-link">Best Practices</a></h2>
<ol>
<li><strong>Trust the LLM</strong> - It handles edge cases better than regex</li>
<li><strong>Keep fallbacks</strong> - Pattern matching still works when LLM is rate limited</li>
<li><strong>Use confirmations</strong> - Dangerous operations should require explicit &quot;yes&quot;</li>
<li><strong>Check logs</strong> - Verify which parsing stage is being used</li>
<li><strong>Test natural language</strong> - &quot;yo give that dude 50&quot; should just work</li>
</ol></div><nav class="flex items-center justify-between mt-16 pt-8 border-t border-[var(--border)]"><a class="group flex items-center gap-2 px-4 py-3 rounded-lg border border-[var(--border)] bg-[var(--bg-secondary)] hover:border-[var(--accent)] hover:shadow-soft transition-all" href="/ai/tools/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left w-5 h-5 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors"><path d="m15 18-6-6 6-6"></path></svg><div class="text-left"><div class="text-xs text-[var(--text-muted)] mb-0.5">Previous</div><div class="text-sm font-medium text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors">Tool Calls</div></div></a><a class="group flex items-center gap-2 px-4 py-3 rounded-lg border border-[var(--border)] bg-[var(--bg-secondary)] hover:border-[var(--accent)] hover:shadow-soft transition-all" href="/jarvis/commands/"><div class="text-right"><div class="text-xs text-[var(--text-muted)] mb-0.5">Next</div><div class="text-sm font-medium text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors">Commands Reference</div></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-5 h-5 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors"><path d="m9 18 6-6-6-6"></path></svg></a></nav></article></div></main></div></div></div><script src="/_next/static/chunks/webpack-e5714bf66625afb9.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/443896d591e4f761-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/3cf59f0fd0496c15.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[2846,[],\"\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[2060,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"ThemeProvider\"]\nb:I[4351,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"Header\"]\nc:I[9399,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"185\",\"static/chunks/app/layout-4b75b78215e64ea2.js\"],\"Sidebar\"]\ne:I[1060,[],\"\"]\n8:[\"slug\",\"jarvis/parsing\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"FeUt14WxB_Uw-6zJdn3nr\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"jarvis\",\"parsing\",\"\"],\"initialTree\":[\"\",{\"children\":[[\"slug\",\"jarvis/parsing\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"jarvis\\\",\\\"parsing\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"jarvis/parsing\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\",null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3cf59f0fd0496c15.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_f367f3 __variable_a06722 font-sans\",\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-[var(--bg-primary)] transition-colors duration-200\",\"children\":[[\"$\",\"$Lb\",null,{}],[\"$\",\"div\",null,{\"className\":\"flex\",\"children\":[[\"$\",\"$Lc\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 min-w-0 lg:pl-[var(--sidebar-width)]\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-[var(--content-max-width)] mx-auto px-6 py-8 lg:px-8 lg:py-12\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]]}]]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]\n"])</script><script>self.__next_f.push([1,"10:I[6430,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"Breadcrumbs\"]\n11:I[9078,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"CopyPageButton\"]\n13:I[3308,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"PageNavigation\"]\n14:I[5321,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"TableOfContents\"]\n6:[[\"$\",\"article\",null,{\"className\":\"animate-in\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-start justify-between gap-4 mb-6\",\"children\":[[\"$\",\"$L10\",null,{}],[\"$\",\"$L11\",null,{}]]}],[\"$\",\"h1\",null,{\"children\":\"Parsing\"}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"prose-custom\",\"children\":\"$L12\"}],[\"$\",\"$L13\",null,{}]]}],[\"$\",\"$L14\",null,{}]]\nd:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Parsing - Beboa Docs\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,"15:I[5045,[\"972\",\"static/chunks/972-68a674eeca97bbbb.js\",\"646\",\"static/chunks/646-1e67c3e800eb58dd.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-ea4807ff1312ce17.js\"],\"CodeBlock\"]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"h1\",null,{\"id\":\"intent-parsing-deep-dive\",\"children\":\"Intent Parsing Deep Dive\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"How Jarvis Mode interprets natural language commands using \",[\"$\",\"strong\",null,{\"children\":\"LLM-first parsing\"}],\".\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"the-llm-first-pipeline\",\"children\":[\"$\",\"a\",null,{\"href\":\"#the-llm-first-pipeline\",\"className\":\"anchor-link\",\"children\":\"The LLM-First Pipeline\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Jarvis Mode now uses an LLM as the \",[\"$\",\"strong\",null,{\"children\":\"primary\"}],\" intent parser, with pattern matching and keyword analysis as fallbacks.\"]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"User Input\\n    â”‚\\n    â–¼\\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\\nâ”‚ Stage 1: Pending Confirmations  â”‚ â”€â”€â”€ Handle \\\"yes\\\"/\\\"no\\\" for dangerous ops\\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\\n               â”‚\\n               â–¼\\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\\nâ”‚ Stage 2: LLM Intent Parser      â”‚ â”€â”€â”€ PRIMARY: AI understands intent\\nâ”‚ (x-ai/grok-4.1-fast)            â”‚     confidence \u003e 0.6? Execute!\\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\\n               â”‚ No match or low confidence\\n               â–¼\\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\\nâ”‚ Stage 3: Pattern Matching       â”‚ â”€â”€â”€ FALLBACK: Regex patterns\\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\\n               â”‚ No match\\n               â–¼\\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\\nâ”‚ Stage 4: Intent Keywords        â”‚ â”€â”€â”€ FALLBACK: Keyword scoring\\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\\n               â”‚\\n               â–¼\\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\\nâ”‚ Stage 5: Context Substitution   â”‚ â”€â”€â”€ \\\"them\\\" â†’ last mentioned user\\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"stage-2-llm-intent-parser-primary\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stage-2-llm-intent-parser-primary\",\"className\":\"anchor-link\",\"children\":\"Stage 2: LLM Intent Parser (Primary)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The LLM evaluator understands natural language and extracts structured command data.\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"llm-system-prompt\",\"children\":[\"$\",\"a\",null,{\"href\":\"#llm-system-prompt\",\"className\":\"anchor-link\",\"children\":\"LLM System Prompt\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const JARVIS_SYSTEM_PROMPT = `You are a natural language command parser for Beboa Discord bot's admin mode.\\nParse user messages to identify admin commands and extract parameters.\\n\\nAvailable commands:\\n- give_bebits: Award currency (params: targetUserId, amount)\\n- remove_bebits: Deduct currency (params: targetUserId, amount)\\n- set_bebits: Set exact balance (params: targetUserId, amount)\\n- transfer_bebits: Move between users (params: fromUserId, toUserId, amount)\\n- reset_streak: Clear check-in streak (params: targetUserId)\\n- user_info: Get user statistics (params: targetUserId)\\n- compare_users: Compare two users (params: userId1, userId2)\\n- server_stats: Server-wide statistics (no params)\\n- set_mood: Change bot mood (params: moodName)\\n- bonk, shame, praise, roast, simp_check, fortune, compatibility...\\n...\\n\\nParse casual language:\\n- \\\"give @user 100 bebits\\\" â†’ give_bebits\\n- \\\"yeet 50 coins to @user\\\" â†’ give_bebits\\n- \\\"check @user's stats\\\" â†’ user_info\\n- \\\"roast that fool @user\\\" â†’ roast\\n`;\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"llm-output-format\",\"children\":[\"$\",\"a\",null,{\"href\":\"#llm-output-format\",\"className\":\"anchor-link\",\"children\":\"LLM Output Format\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"// Example LLM parsing result\\n{\\n  isCommand: true,                    // Is this an admin command?\\n  command: \\\"give_bebits\\\",             // Detected command name\\n  confidence: 0.92,                   // How confident (0.0-1.0)\\n  params: {\\n    targetUserId: \\\"123456789\\\",        // Extracted user ID\\n    amount: 100                       // Extracted amount\\n  },\\n  requiresConfirmation: false,        // Dangerous operation?\\n  clarificationNeeded: null,          // Question to ask if unclear\\n  reasoning: \\\"User wants to give 100 bebits to the mentioned user\\\"\\n}\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"confidence-thresholds\",\"children\":[\"$\",\"a\",null,{\"href\":\"#confidence-thresholds\",\"className\":\"anchor-link\",\"children\":\"Confidence Thresholds\"}]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Confidence\"}],[\"$\",\"th\",null,{\"children\":\"Action\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"â‰¥ 0.6\"}],[\"$\",\"td\",null,{\"children\":\"Execute the command\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"\u003c 0.6 with clarification\"}],[\"$\",\"td\",null,{\"children\":\"Ask the clarification question\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"\u003c 0.6 without clarification\"}],[\"$\",\"td\",null,{\"children\":\"Fall through to pattern matching\"}]]}]]}]]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"llm-examples\",\"children\":[\"$\",\"a\",null,{\"href\":\"#llm-examples\",\"className\":\"anchor-link\",\"children\":\"LLM Examples\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Input:\"}],\" \",[\"$\",\"code\",null,{\"children\":\"\\\"yo give @CoolUser like a hundred coins\\\"\"}]]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"{\\n  isCommand: true,\\n  command: \\\"give_bebits\\\",\\n  confidence: 0.88,\\n  params: { targetUserId: \\\"123456789\\\", amount: 100 },\\n  reasoning: \\\"'yo give' indicates giving, 'like a hundred' = 100\\\"\\n}\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Input:\"}],\" \",[\"$\",\"code\",null,{\"children\":\"\\\"who's the bigger simp, @user1 or @user2\\\"\"}]]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"{\\n  isCommand: true,\\n  command: \\\"compare_users\\\",\\n  confidence: 0.85,\\n  params: { userId1: \\\"111\\\", userId2: \\\"222\\\" },\\n  reasoning: \\\"Comparing two users for simp status = compare_users\\\"\\n}\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Input:\"}],\" \",[\"$\",\"code\",null,{\"children\":\"\\\"make them rich\\\"\"}]]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"{\\n  isCommand: true,\\n  command: \\\"give_bebits\\\",\\n  confidence: 0.45,  // Low - who is \\\"them\\\"?\\n  clarificationNeeded: \\\"Who do you want to make rich?\\\",\\n  reasoning: \\\"'make rich' implies giving bebits but no user specified\\\"\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"confirmation-system\",\"children\":[\"$\",\"a\",null,{\"href\":\"#confirmation-system\",\"className\":\"anchor-link\",\"children\":\"Confirmation System\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"For dangerous operations, the LLM can flag \",[\"$\",\"code\",null,{\"children\":\"requiresConfirmation: true\"}],\":\"]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"// remove_bebits, reset_streak, etc.\\nif (llmIntent.requiresConfirmation) {\\n  pendingConfirmations.set(userId, {\\n    command: llmIntent.command,\\n    params: llmIntent.params,\\n    expires: Date.now() + 60000,  // 60 second timeout\\n    execute: async () =\u003e { /* ... */ }\\n  });\\n\\n  return \\\"âš ï¸ This is a destructive operation. Are you sure? (Reply 'yes' to confirm)\\\";\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"stage-3-pattern-matching-fallback\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stage-3-pattern-matching-fallback\",\"className\":\"anchor-link\",\"children\":\"Stage 3: Pattern Matching (Fallback)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"When LLM is unavailable or returns low confidence, regex patterns are tried:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const patterns = {\\n  give_bebits: [\\n    /(?:give|award|grant)\\\\s+(?:\u003c@!?)?(\\\\d+)(?:\u003e)?\\\\s+(\\\\d+)\\\\s*(?:bebits?|points?)?/i,\\n    /(?:\u003c@!?)?(\\\\d+)(?:\u003e)?\\\\s+(?:gets?|receives?)\\\\s+(\\\\d+)\\\\s*(?:bebits?|points?)?/i\\n  ],\\n  remove_bebits: [\\n    /(?:remove|take|yoink)\\\\s+(\\\\d+)\\\\s*(?:bebits?)?\\\\s*from\\\\s+(?:\u003c@!?)?(\\\\d+)(?:\u003e)?/i\\n  ],\\n  bonk: [\\n    /bonk\\\\s+(?:\u003c@!?)?(\\\\d+)(?:\u003e)?/i,\\n    /(?:send|put)\\\\s+(?:\u003c@!?)?(\\\\d+)(?:\u003e)?\\\\s+(?:to|in)\\\\s+(?:horny\\\\s+)?jail/i\\n  ]\\n  // ... more patterns\\n};\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"stage-4-intent-keywords-fallback\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stage-4-intent-keywords-fallback\",\"className\":\"anchor-link\",\"children\":\"Stage 4: Intent Keywords (Fallback)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Keyword scoring as a last resort:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const intentKeywords = {\\n  give_bebits: ['give', 'award', 'grant', 'add', 'bless', 'bebits', 'points'],\\n  remove_bebits: ['remove', 'take', 'deduct', 'yoink', 'steal', 'minus'],\\n  user_info: ['info', 'check', 'who', 'about', 'details', 'lookup'],\\n  roast: ['roast', 'burn', 'drag', 'destroy', 'murder'],\\n  // ... more keywords\\n};\\n\\nfunction analyzeIntent(message) {\\n  const scores = {};\\n  for (const [command, keywords] of Object.entries(intentKeywords)) {\\n    let score = 0;\\n    for (const keyword of keywords) {\\n      if (message.toLowerCase().includes(keyword)) {\\n        score += keyword.length;  // Longer = more specific\\n      }\\n    }\\n    if (score \u003e 0) scores[command] = score;\\n  }\\n  return /* best match with confidence */;\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"stage-5-context-substitution\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stage-5-context-substitution\",\"className\":\"anchor-link\",\"children\":\"Stage 5: Context Substitution\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Uses conversation history for pronouns:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"const conversationContext = {\\n  lastMentionedUser: null,\\n  lastCommand: null\\n};\\n\\n// \\\"give them 50 more\\\" â†’ resolves \\\"them\\\" from context\\nif (message.match(/\\\\b(them|that person)\\\\b/i) \u0026\u0026 !extractUserId(message)) {\\n  const enhanced = message.replace(/them/gi, `\u003c@${context.lastMentionedUser}\u003e`);\\n  return parseAndExecuteAdminCommand(enhanced, context);\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"debugging\",\"children\":[\"$\",\"a\",null,{\"href\":\"#debugging\",\"className\":\"anchor-link\",\"children\":\"Debugging\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Enable logging to see which stage handled the command:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"[JARVIS] LLM parsed: give_bebits (confidence: 0.92)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Or for fallbacks:\"}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"$undefined\",\"children\":\"[JARVIS] LLM not available or low confidence, trying pattern matching\\n[JARVIS] Pattern matched: give_bebits\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#configuration\",\"className\":\"anchor-link\",\"children\":\"Configuration\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"env\",\"children\":\"# Enable LLM-powered parsing (primary)\\nLLM_EVALUATOR_ENABLED=true\\n\\n# Model for intent parsing\\nLLM_EVALUATOR_MODEL=x-ai/grok-4.1-fast\\n\\n# Rate limit for evaluator\\nLLM_EVALUATOR_RATE_LIMIT=30\\n\\n# Cache parsed intents\\nLLM_EVALUATOR_CACHE_TTL=60000\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"benefits-of-llm-first\",\"children\":[\"$\",\"a\",null,{\"href\":\"#benefits-of-llm-first\",\"className\":\"anchor-link\",\"children\":\"Benefits of LLM-First\"}]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"Before (Regex-First)\"}],[\"$\",\"th\",null,{\"children\":\"After (LLM-First)\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"1200+ lines of regex patterns\"}],[\"$\",\"td\",null,{\"children\":\"LLM understands natural language\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Misses casual phrasing\"}],[\"$\",\"td\",null,{\"children\":\"\\\"yeet coins at them\\\" works\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Rigid parameter positions\"}],[\"$\",\"td\",null,{\"children\":\"Flexible word order\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"No typo tolerance\"}],[\"$\",\"td\",null,{\"children\":\"Handles typos and variations\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Context-blind\"}],[\"$\",\"td\",null,{\"children\":\"Understands conversation flow\"}]]}]]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"adding-new-commands\",\"children\":[\"$\",\"a\",null,{\"href\":\"#adding-new-commands\",\"className\":\"anchor-link\",\"children\":\"Adding New Commands\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Add to the LLM system prompt in \",[\"$\",\"code\",null,{\"children\":\"llmEvaluator.js\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Define the command in \",[\"$\",\"code\",null,{\"children\":\"adminCommands.js\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The LLM will automatically understand natural variations\"}],\"\\n\"]}],\"\\n\",[\"$\",\"$L15\",null,{\"language\":\"javascript\",\"children\":\"// No regex needed! Just add to prompt:\\n\\\"- new_command: Description (params: param1, param2)\\\"\\n\\n// And the execute handler:\\n{\\n  name: 'new_command',\\n  execute: async (match, context) =\u003e { /* ... */ }\\n}\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"best-practices\",\"children\":[\"$\",\"a\",null,{\"href\":\"#best-practices\",\"className\":\"anchor-link\",\"children\":\"Best Practices\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Trust the LLM\"}],\" - It handles edge cases better than regex\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Keep fallbacks\"}],\" - Pattern matching still works when LLM is rate limited\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Use confirmations\"}],\" - Dangerous operations should require explicit \\\"yes\\\"\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Check logs\"}],\" - Verify which parsing stage is being used\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Test natural language\"}],\" - \\\"yo give that dude 50\\\" should just work\"]}],\"\\n\"]}]]\n"])</script></body></html>